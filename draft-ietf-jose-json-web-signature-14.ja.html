<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>JSON Web Signature (JWS)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="JSON Web Signature (JWS)">
<meta name="keywords" content="RFC, Request for Comments, I-D, Internet-Draft, JavaScript Object Notation, JSON, JSON Object Signing and Encryption, JOSE, JSON Web Signature, JWS, JSON Web Encryption, JWE, JSON Web Key, JWK, JSON Web Algorithms, JWA">
<meta name="generator" content="xml2rfc v1.36 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">JOSE Working Group</td><td class="header">M. Jones</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Microsoft</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">J. Bradley</td></tr>
<tr><td class="header">Expires: January 30, 2014</td><td class="header">Ping Identity</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">N. Sakimura</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">NRI</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 29, 2013</td></tr>
</table></td></tr></table>
<h1><br />JSON Web Signature (JWS)<br />draft-ietf-jose-json-web-signature-14</h1>

<h3>Abstract</h3>

<p>
        JSON Web Signature (JWS)は, JavaScript Object Notation (JSON)をベースとしたデータ構造を用いて, デジタル署名やMessage Authentication Codes (MACs)により保護されたコンテンツを表現するための手段である.
        本仕様で使用する暗号アルゴリズムと識別子はJSON Web Algorithms (JWA) で述べられている.
        関連する暗号化の機能は, JSON Web Encryption (JWE) で述べられている.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 30, 2014.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2013 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#Introduction">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NotationalConventions">1.1.</a>&nbsp;
Notational Conventions<br />
<a href="#Terminology">2.</a>&nbsp;
Terminology<br />
<a href="#Overview">3.</a>&nbsp;
JSON Web Signature (JWS) Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ExampleJWS">3.1.</a>&nbsp;
Example JWS<br />
<a href="#Header">4.</a>&nbsp;
JWS Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ReservedHeaderParameterName">4.1.</a>&nbsp;
Reserved Header Parameter Names<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#algDef">4.1.1.</a>&nbsp;
"alg" (Algorithm) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#jkuDef">4.1.2.</a>&nbsp;
"jku" (JWK Set URL) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#jwkDef">4.1.3.</a>&nbsp;
"jwk" (JSON Web Key) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#x5uDef">4.1.4.</a>&nbsp;
"x5u" (X.509 URL) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#x5tDef">4.1.5.</a>&nbsp;
"x5t" (X.509 Certificate Thumbprint) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#x5cDef">4.1.6.</a>&nbsp;
"x5c" (X.509 Certificate Chain) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#kidDef">4.1.7.</a>&nbsp;
"kid" (Key ID) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#typDef">4.1.8.</a>&nbsp;
"typ" (Type) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ctyDef">4.1.9.</a>&nbsp;
"cty" (Content Type) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#critDef">4.1.10.</a>&nbsp;
"crit" (Critical) Header Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#PublicHeaderParameterName">4.2.</a>&nbsp;
Public Header Parameter Names<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#PrivateHeaderParameterName">4.3.</a>&nbsp;
Private Header Parameter Names<br />
<a href="#JWSRules">5.</a>&nbsp;
Producing and Consuming JWSs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MessageSigning">5.1.</a>&nbsp;
Message Signing or MACing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MessageValidation">5.2.</a>&nbsp;
Message Signature or MAC Validation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#StringComparison">5.3.</a>&nbsp;
String Comparison Rules<br />
<a href="#IDingKeys">6.</a>&nbsp;
Key Identification<br />
<a href="#Serializations">7.</a>&nbsp;
Serializations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#CompactSerialization">7.1.</a>&nbsp;
JWS Compact Serialization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSONSerialization">7.2.</a>&nbsp;
JWS JSON Serialization<br />
<a href="#IANA">8.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HdrReg">8.1.</a>&nbsp;
JSON Web Signature and Encryption Header Parameters Registry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HdrTemplate">8.1.1.</a>&nbsp;
Registration Template<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HdrContents">8.1.2.</a>&nbsp;
Initial Registry Contents<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TypReg">8.2.</a>&nbsp;
JSON Web Signature and Encryption Type Values Registry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TypTemplate">8.2.1.</a>&nbsp;
Registration Template<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TypContents">8.2.2.</a>&nbsp;
Initial Registry Contents<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MediaReg">8.3.</a>&nbsp;
Media Type Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MediaContents">8.3.1.</a>&nbsp;
Registry Contents<br />
<a href="#Security">9.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#CryptoSecCon">9.1.</a>&nbsp;
Cryptographic Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSONSecCon">9.2.</a>&nbsp;
JSON Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UnicodeSecCon">9.3.</a>&nbsp;
Unicode Comparison Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TLS_requirements">9.4.</a>&nbsp;
TLS Requirements<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references3">10.3.</a>&nbsp;
翻訳プロジェクト<br />
<a href="#JWSExamples">Appendix&nbsp;A.</a>&nbsp;
JWS Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HS256Example">A.1.</a>&nbsp;
Example JWS using HMAC SHA-256<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HS256Encoding">A.1.1.</a>&nbsp;
Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HS256Decoding">A.1.2.</a>&nbsp;
Decoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HS256Validating">A.1.3.</a>&nbsp;
Validating<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RS256Example">A.2.</a>&nbsp;
Example JWS using RSASSA-PKCS-v1_5 SHA-256<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RS256Encoding">A.2.1.</a>&nbsp;
Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RS256Decoding">A.2.2.</a>&nbsp;
Decoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RS256Validating">A.2.3.</a>&nbsp;
Validating<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES256Example">A.3.</a>&nbsp;
Example JWS using ECDSA P-256 SHA-256<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES256Encoding">A.3.1.</a>&nbsp;
Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES256Decoding">A.3.2.</a>&nbsp;
Decoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES256Validating">A.3.3.</a>&nbsp;
Validating<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES512Example">A.4.</a>&nbsp;
Example JWS using ECDSA P-521 SHA-512<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES512Encoding">A.4.1.</a>&nbsp;
Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES512Decoding">A.4.2.</a>&nbsp;
Decoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ES512Validating">A.4.3.</a>&nbsp;
Validating<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ExamplePlaintextJWS">A.5.</a>&nbsp;
Example Plaintext JWS<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSONSerializationExample">A.6.</a>&nbsp;
Example JWS Using JWS JSON Serialization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSProtectedHeader">A.6.1.</a>&nbsp;
JWS Per-Signature Protected Headers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSRecipientHeaders">A.6.2.</a>&nbsp;
JWS Per-Signature Unprotected Headers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSHeader">A.6.3.</a>&nbsp;
Complete JWS Header Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#JSComplete">A.6.4.</a>&nbsp;
Complete JWS JSON Serialization Representation<br />
<a href="#x5cExample">Appendix&nbsp;B.</a>&nbsp;
"x5c" (X.509 Certificate Chain) Example<br />
<a href="#base64urlnotes">Appendix&nbsp;C.</a>&nbsp;
Notes on implementing base64url encoding without padding<br />
<a href="#critTest">Appendix&nbsp;D.</a>&nbsp;
Negative Test Case for "crit" Header Parameter<br />
<a href="#Acknowledgements">Appendix&nbsp;E.</a>&nbsp;
Acknowledgements<br />
<a href="#History">Appendix&nbsp;F.</a>&nbsp;
Document History<br />
<a href="#Translator">Appendix&nbsp;G.</a>&nbsp;
翻訳者<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="Introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        JSON Web Signature (JWS)は, JavaScript Object Notation (JSON) <a class='info' href='#RFC4627'>[RFC4627]<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a> をベースとしたデータ構造を用いて, デジタル署名やMessage Authentication Codes (MACs)により保護されたコンテンツを表現するための手段である.
        JWSの暗号化メカニズムは任意のオクテット列に対して完全性保護を提供する.
      
</p>
<p>
        JWSオブジェクトのために2つの密接に関連する表現が定義されている
        JWS Compact Serializationはコンパクトであり, HTTP Authorization ヘッダやURIクエリパラメータのようなスペースが制約された環境を意図したURL-safeな表現である.
        JWS JSON SerializationはJSONオブジェクトとしてJWSオブジェクトを表現し, 同じコンテンツに対して複数の署名とMACsの両方, またはいずれかを適用することができる.
        両方とも, 同じ暗号基盤を共有する.
      
</p>
<p>
        本仕様で使用する暗号アルゴリズムと識別子はJSON Web Algorithms (JWA) <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a>で述べられている.
        関連する暗号化の機能は, JSON Web Encryption (JWE) <a class='info' href='#JWE'>[JWE]<span> (</span><span class='info'>Jones, M., Rescorla, E., and J. Hildebrand, &ldquo;JSON Web Encryption (JWE),&rdquo; July&nbsp;2013.</span><span>)</span></a>で述べられている.
      
</p>
<a name="NotationalConventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Notational Conventions</h3>

<p>
          本仕様で用いられる各キーワード「MUST (しなければならない)」, 「MUST NOT (してはならない)」, 「REQUIRED (必須である)」, 「SHALL (するものとする)」, 「SHALL NOT (しないものとする)」, 「SHOULD (すべきである)」, 「SHOULD NOT (すべきではない)」, 「RECOMMENDED (推奨される)」, 「MAY (してもよい)」, 「OPTIONAL (任意である)」は <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> で述べられている通りに解釈されるべきものである.
        
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
	</p>
<blockquote class="text"><dl>
<dt>JSON Web Signature (JWS)</dt>
<dd>
        デジタル署名もしくはMAC化されたメッセージを表現するデータ構造.
        この構造は次の3つの値を表す:
        JWS ヘッダ,
        JWS ペイロード,
        JWS 署名
	  
</dd>
<dt>JSON Text Object</dt>
<dd>
        JSONオブジェクトを表現するUTF-8 <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>でエンコードされた文字列.
        JSONオブジェクトの構文は<a class='info' href='#RFC4627'>[RFC4627]<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a>のSection 2.2で定義されている.
	  
</dd>
<dt>JWS Header</dt>
<dd>
        JWS 署名値を作成するために使用したデジタル署名やMACの操作を説明するJSONテキストオブジェクト(もしくはJWS JSON Serializationを用いたJSONテキストオブジェクト).
        JWS ヘッダオブジェクトのメンバはヘッダパラメータである.
	  
</dd>
<dt>JWS Payload</dt>
<dd>
        保護されたオクテット列であり, メッセージとも呼ばれる.
        ペイロードは任意のオクテット列を含むことが出来る.
	  
</dd>
<dt>JWS Signature</dt>
<dd>
        JWS プロテクトヘッダとJWS ペイロードの完全性を保証する暗号を含んだオクテット列.
        JWS 署名値はJWS ヘッダで指定されたパラメータを使いJWS署名入力から計算されたデジタル署名やMACの値である.
	  
</dd>
<dt>JWS Protected Header</dt>
<dd>
        完全性が保護されたJWS ヘッダの部分を含むJSON テキストオブジェクト.
        JWS Compact Serializationについては, これは完全なJWS ヘッダを含む.
        JWS JSON Serializationについては, これはJWSヘッダのコンポーネントの1つである.
	  
</dd>
<dt>Header Parameter</dt>
<dd>
        JWSヘッダのメンバである名前と値のペア.
	  
</dd>
<dt>Header Parameter Name</dt>
<dd>
        JWSヘッダのメンバの名前.
	  
</dd>
<dt>Header Parameter Value</dt>
<dd>
        JWSヘッダのメンバの値.
	  
</dd>
<dt>Base64url Encoding</dt>
<dd>
        <a class='info' href='#RFC4648'>RFC 4648<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a> [RFC4648]のSection 3.2で許可されているように, Section 5で述べられているURL-safeでない穴埋め文字'='を除いた, URL-safeかつfilename-safeであるBase64エンコーディング. (穴埋めなしのbase64urlエンコーディングの実装に関する注意事項については<a class='info' href='#base64urlnotes'>Appendix&nbsp;C<span> (</span><span class='info'>Notes on implementing base64url encoding without padding</span><span>)</span></a>を参照.)
	  
</dd>
<dt>Encoded JWS Header</dt>
<dd>
        Base64urlでエンコードされたJWS プロテクトヘッダ.
	  
</dd>
<dt>Encoded JWS Payload</dt>
<dd>
        Base64urlでエンコードされたJWS ペイロード.
	  
</dd>
<dt>Encoded JWS Signature</dt>
<dd>
        Base64urlでエンコードされたJWS 署名.
	  
</dd>
<dt>JWS Signing Input</dt>
<dd>
        エンコード済JWSヘッダ, ピリオド('.'), およびエンコード済JWSペイロードを連結したもの.
	  
</dd>
<dt>JWS Compact Serialization</dt>
<dd>
        エンコード済JWS ヘッダ, エンコード済JWS ペイロード, エンコード済JWS 署名を順番通りに, 3つの文字列を2つのピリオド('.')で区切り連結したJWSの表現.
        この表現はコンパクトでありURL-safeである.
	  
</dd>
<dt>JWS JSON Serialization</dt>
<dd>
	    JWS ヘッダ,
	    エンコード済 JWS ペイロード,
	    エンコード済 JWS 署名値
        を含むJSON構造であるJWSの表現.
        JWS Compact Serializationと異なり,
        JWS JSON Serializationは同じコンテンツに対して複数の署名とMACsの両方, またはいずれかを適用することができる.
        この表現はコンパクトでもなくURL-safeでもない.
	  
</dd>
<dt>Collision Resistant Namespace</dt>
<dd>
        他の名前と衝突することが極めて低くなるように名前を割り当てることを可能にする名前空間.
        例えば, 衝突耐性は名前空間の部分の管理を委譲することで, または衝突耐性のある名前割り当て関数を利用することで実現できる.
        Collision Resistant Namespaceの例:
        ドメイン名,
        ITU-T X.660とX.670 Recommendation seriesで定義されたObject Identifiers (OIDs),
        Universally Unique IDentifiers (UUIDs)
        <a class='info' href='#RFC4122'>[RFC4122]<span> (</span><span class='info'>Leach, P., Mealling, M., and R. Salz, &ldquo;A Universally Unique IDentifier (UUID) URN Namespace,&rdquo; July&nbsp;2005.</span><span>)</span></a>.
        管理上委譲された名前空間を使用する場合, 名前を定義する際に, 名前を定義するために使用する名前空間の一部を制限していることを保証するために適切な注意を払う必要がある.
	  
</dd>
<dt>StringOrURI</dt>
<dd>
        以下の制約を設けたJSON文字列. 任意の文字列値を使用してよい(MAY)が, ":"を含む文字列はURI<a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>でなければならない(MUST).
        StringOrURIの値は変換や正規化は適用されず, 比較時には大文字・小文字を区別する.
	  
</dd>
</dl></blockquote><p>
      
</p>
<a name="Overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
JSON Web Signature (JWS) Overview</h3>

<p>
        JWSはJSONデータ構造とbase64urlエンコーディングを用いてデジタル署名, もしくはMACを行ったコンテンツを表現する.
        JWSでは次の3つの値が表現される:
        JWSヘッダ,
        JWSペイロード,
        JWS署名.
        Compact Serializationでは3つの値はデータ転送のためにBase64urlでエンコードされ, またエンコードされた文字列を順番通りに, 3つの文字列を2つのピリオド('.')で区切って連結したものとして表現される.
        JSON Serializationの情報は<a class='info' href='#JSONSerialization'>Section&nbsp;7.2<span> (</span><span class='info'>JWS JSON Serialization</span><span>)</span></a>で定義されている.
      
</p>
<p>
        JWSヘッダは採用した署名もしくはMACの手法とパラメータを記述する.
        JWSペイロードは保護されるメッセージコンテンツである.
        JWS署名はJWSプロテクトヘッダとJWSヘッダ両方の完全性を保証する.
      
</p>
<a name="ExampleJWS"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Example JWS</h3>

<p>
      以下に示す例では, JWSヘッダはエンコードされたオブジェクトがJSON Web Token (JWT) <a class='info' href='#JWT'>[JWT]<span> (</span><span class='info'>Jones, M., Bradley, J., and N. Sakimura, &ldquo;JSON Web Token (JWT),&rdquo; July&nbsp;2013.</span><span>)</span></a>であり, JWSヘッダとJWSペイロードがHMAC SHA-256アルゴリズムで保護されていることを示している:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"typ":"JWT",
   "alg":"HS256"}
</pre></div>
<p>
      JWSヘッダのUTF-8で表現されたオクテットをBase64urlエンコーディングすることで, 以下のエンコード済JWSヘッダの値が得られる:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
</pre></div>
<p>
      以下はJWSペイロードとして用いることの出来るJSONオブジェクトの例である.(ペイロードは任意のコンテンツになり得るため, JSONオブジェクト表現である必要はないことに注意する.)
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"iss":"joe",
   "exp":1300819380,
   "http://example.com/is_root":true}
</pre></div>
<p>
      上記のJSONオブジェクトのUTF-8表現である以下のオクテット列が, JWSペイロードである:
	
</p>
<p>

[123, 34, 105, 115, 115, 34, 58, 34, 106, 111, 101, 34, 44, 13, 10, 32, 34, 101, 120, 112, 34, 58, 49, 51, 48, 48, 56, 49, 57, 51, 56, 48, 44, 13, 10, 32, 34, 104, 116, 116, 112, 58, 47, 47, 101, 120, 97, 109, 112, 108, 101, 46, 99, 111, 109, 47, 105, 115, 95, 114, 111, 111, 116, 34, 58, 116, 114, 117, 101, 125]

	
</p>
<p>
      JWSペイロードをBase64urlエンコーディングすることで, 以下のエンコード済JWSペイロードが得られる
      (改行は掲載上の都合による):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
</pre></div>
<p>
      JWS署名入力(エンコード済JWSヘッダ, ピリオド('.'), エンコード済JWSペイロードを連結したもの)をASCII <a class='info' href='#USASCII'>[USASCII]<span> (</span><span class='info'>American National Standards Institute, &ldquo;Coded Character Set -- 7-bit American Standard Code for Information Interchange,&rdquo; 1986.</span><span>)</span></a> で表現したオクテットのHMACを, <a class='info' href='#HS256Example'>Appendix&nbsp;A.1<span> (</span><span class='info'>Example JWS using HMAC SHA-256</span><span>)</span></a>で指定されたキーを用いてHMAC SHA-256アルゴリズムで計算し, 結果をbase64urlエンコードすることで, 以下のエンコード済JWS署名値が得られる:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk
</pre></div>
<p>
      これらの値をヘッダ.ペイロード.署名の順番で, パーツの間をピリオド('.')で連結することでJWS Compact Serializationを用いたこの完全なJWS表現が得られる
      (改行は掲載上の都合による):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
  .
  dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk
</pre></div>
<p>
      この計算は<a class='info' href='#HS256Example'>Appendix&nbsp;A.1<span> (</span><span class='info'>Example JWS using HMAC SHA-256</span><span>)</span></a>で更に詳細に示されている.
      その他の例については<a class='info' href='#JWSExamples'>Appendix&nbsp;A<span> (</span><span class='info'>JWS Examples</span><span>)</span></a>を参照すること.
	
</p>
<a name="Header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
JWS Header</h3>

<p>
        JWSヘッダを表現するJSONオブジェクトのメンバは, エンコードJWSヘッダ, エンコード済JWSペイロード, およびJWSのオプショナルプロパティーに適用されたデジタル署名ないしMACを記述する.
        JWSヘッダ内のヘッダパラメータ名はユニークでなければならない (MUST).
        受信者は重複したヘッダパラメータ名を持つJWSを, 拒否するか, または以下の動作をするJSONパーサーを使用しなければならない (MUST).
        すなわち, 重複したメンバ名に対して字面上で最後の(lexically last)もののみを返すようなJSONパーサーである(この動作はECMAScript 5.1 <a class='info' href='#ECMAScript'>[ECMAScript]<span> (</span><span class='info'>Ecma International, &ldquo;ECMAScript Language Specification, 5.1 Edition,&rdquo; June&nbsp;2011.</span><span>)</span></a> Section 15.12 (The JSON Object)で定義されている).
      
</p>
<p>
        実装は本仕様において「理解しなければならない (MUST)」と定義されているヘッダパラメータを理解し, 本仕様に定義されている方法で処理することが要求される.
        本仕様で定義されており, かつMUSTでないヘッダパラメータは, 理解できなかった場合にはすべて無視しなければならない (MUST).
        <a class='info' href='#critDef'>Section&nbsp;4.1.10<span> (</span><span class='info'>&quot;crit&quot; (Critical) Header Parameter</span><span>)</span></a>によってクリティカルヘッダパラメータとして列挙されている場合を除き, 本仕様で定義されていないヘッダパラメータは, 理解できなかった場合にはすべて無視しなければならない (MUST).
      
</p>
<p>
        ヘッダパラメータ名には3つのクラスがある. すなわち, 予約済ヘッダパラメータ名, パブリックヘッダパラメータ名, およびプライベートヘッダパラメータ名である.
      
</p>
<a name="ReservedHeaderParameterName"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Reserved Header Parameter Names</h3>

<p>
          以下に示すヘッダパラメータ名は予約済とし, その意味を以下で定義する.
          これらのパラメータ名は短いが, それは本仕様の主目的として, JWS Compact Serialization方式による生成結果を小さくするためである.
	
</p>
<p>
          追加の予約済ヘッダパラメータ名が定義される場合は, IANAによって JSON Web Signature and Encryption Header Parameters レジストリ <a class='info' href='#HdrReg'>Section&nbsp;8.1<span> (</span><span class='info'>JSON Web Signature and Encryption Header Parameters Registry</span><span>)</span></a>に追加される.
          レジストリが共通であることから示されるとおり, JWSとJWEはヘッダパラメータ空間を共有する. あるパラメータが両方の仕様で使われる場合, その使い方は2つの仕様の間で互換でなればならない.
	
</p>
<a name="algDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
"alg" (Algorithm) Header Parameter</h3>

<p>
	    <tt>alg</tt> (algorithm) ヘッダパラメータはJWSの署名に使われる暗号アルゴリズムを識別する.
            受信者は以下の場合にはJWSを拒否しなければならない (MUST): <tt>alg</tt>の値がサポートするアルゴリズムを表現していない場合, またはデジタル署名ないしMACを行ったパーティーの有効な鍵がない場合.
	    <tt>alg</tt>の値はIANA
	    JSON Web Signature and Encryption Algorithms レジストリ
	    <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a> に登録されているか, またはCollision Resistant Namespaceを含んでいるべきである (SHOULD).
	    <tt>alg</tt>の値はStringOrURIを表現する文字列であり, 大文字・小文字は区別される.
            このヘッダパラメータの利用は必須である (REQUIRED).
            実装はこのヘッダパラメータを理解しなければならない (MUST).
	  
</p>
<p>
            定義済の<tt>alg</tt>値は IANA JSON Web Signature and Encryption Algorithms レジストリ <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a>に一覧されている.
            このレジストリの初期の内容はJSON Web Algorithms (JWA) <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a>仕様のSection 3.1で定義されている.
	  
</p>
<a name="jkuDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
"jku" (JWK Set URL) Header Parameter</h3>

<p>
	    <tt>jku</tt> (JWK Set URL)ヘッダパラメータはURI<a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>であり, JSONでエンコードされた公開鍵セットのリソースを参照する. そのうちのひとつがJWSにデジタル署名をするときに用いる秘密鍵と対応する.
	    鍵は JSON Web Key Set (JWK Set) <a class='info' href='#JWK'>[JWK]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Key (JWK),&rdquo; July&nbsp;2013.</span><span>)</span></a>にしたがってエンコードされていなければならない (MUST).
            リソースを取得するために使用するプロトコルは完全性を保証しなければならない (MUST).
            HTTP GETリクエストによってJWK Setを取得する場合にはTLS<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> <a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a>を使用しなければならない (MUST).
            サーバーのアイデンティティーはHTTP Over TLS <a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>のSection 3.1で定義されるとおりに検証されなければならない (MUST)
            このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<a name="jwkDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.3"></a><h3>4.1.3.&nbsp;
"jwk" (JSON Web Key) Header Parameter</h3>

<p>
	    <tt>jwk</tt> (JSON Web Key)ヘッダパラメータはJWSにデジタル署名をするときに用いる秘密鍵と対応する公開鍵である.
            鍵は JSON Web Key <a class='info' href='#JWK'>[JWK]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Key (JWK),&rdquo; July&nbsp;2013.</span><span>)</span></a>形式で表現される.
            このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<a name="x5uDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.4"></a><h3>4.1.4.&nbsp;
"x5u" (X.509 URL) Header Parameter</h3>

<p>
	    <tt>x5u</tt> (X.509 URL)ヘッダパラメータはURIであり, JWSにデジタル署名するために用いる鍵に対応するX.509公開鍵証明書もしくは証明書チェーン <a class='info' href='#RFC5280'>[RFC5280]<span> (</span><span class='info'>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile,&rdquo; May&nbsp;2008.</span><span>)</span></a> リソースを参照する.
            リソースは証明書または証明書チェーンを表現し, <a class='info' href='#RFC5280'>RFC 5280<span> (</span><span class='info'>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile,&rdquo; May&nbsp;2008.</span><span>)</span></a> [RFC5280]仕様を満たすPEMフォーマット<a class='info' href='#RFC1421'>[RFC1421]<span> (</span><span class='info'>Linn, J., &ldquo;Privacy Enhancement for Internet Electronic Mail: Part I: Message Encryption and Authentication Procedures,&rdquo; February&nbsp;1993.</span><span>)</span></a>でなければならない (MUST).
            JWSのデジタル署名に使用する鍵に対応する公開鍵の証明書は先頭の証明書でなければならない (MUST).
            これの後にさらなる証明書が続いても良く(MAY), それぞれの証明書は直前のものを証明する.
            リソースを取得するために使用するプロトコルは完全性を保証しなければならない (MUST).
            HTTP GETリクエストによってJWK Setを取得する場合にはTLS<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> <a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a>を使用しなければならない (MUST).
            サーバーのアイデンティティーはHTTP Over TLS <a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>のSection 3.1で定義されるとおりに検証されなければならない (MUST)
            このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<a name="x5tDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.5"></a><h3>4.1.5.&nbsp;
"x5t" (X.509 Certificate Thumbprint) Header Parameter</h3>

<p>
	    <tt>x5t</tt> (X.509証明書フィンガープリント)ヘッダパラメータは, JWSにデジタル署名するために用いる鍵に対応するX.509証明書<a class='info' href='#RFC5280'>[RFC5280]<span> (</span><span class='info'>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile,&rdquo; May&nbsp;2008.</span><span>)</span></a>をDER形式で表現し, そのSHA-1フィンガープリント(ダイジェスト)をBase64 URLエンコードしたものである.
            このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<p>
            将来, 証明書フィンガープリントをSHA-1以外のハッシュ関数によって計算する必要が発生した場合, その目的のために追加のヘッダパラメータを定義することが推奨される.
            例えば, 新しい<tt>x5t#S256</tt> (SHA-256によるX.509証明書フィンガープリント)というヘッダパラメータをIANA JSON Web Signature and Encryption Header Parameters レジストリに <a class='info' href='#HdrReg'>Section&nbsp;8.1<span> (</span><span class='info'>JSON Web Signature and Encryption Header Parameters Registry</span><span>)</span></a>登録することが推奨される.
	  
</p>
<a name="x5cDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.6"></a><h3>4.1.6.&nbsp;
"x5c" (X.509 Certificate Chain) Header Parameter</h3>

<p>
	    <tt>x5c</tt> (X.509証明書チェーン) ヘッダパラメータは, JWSにデジタル署名するために用いる鍵に対応するX.509公開鍵証明書もしくは証明書チェーン <a class='info' href='#RFC5280'>[RFC5280]<span> (</span><span class='info'>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile,&rdquo; May&nbsp;2008.</span><span>)</span></a> を含む.
        証明書や証明書チェーンは, 証明書の文字列のJSON配列として表される.
        配列中のそれぞれの文字列はBase64エンコード(<a class='info' href='#RFC4648'>[RFC4648]<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a> 4節 -- Base64 URLエンコードではない)されているDER <a class='info' href='#ITU.X690.1994'>[ITU.X690.1994]<span> (</span><span class='info'>International Telecommunications Union, &ldquo;Information Technology - ASN.1 encoding rules: Specification of Basic Encoding Rules (BER), Canonical Encoding Rules (CER) and Distinguished Encoding Rules (DER),&rdquo; 1994.</span><span>)</span></a> PKIX証明書の値である.
        JWSにデジタル署名するために用いる鍵に対応する公開鍵の証明書は先頭の証明書でなければならない (MUST).
        これの後にさらなる証明書が続いても良く(MAY), それぞれの証明書は直前のものを証明する.
        受信者は証明書チェーンを <a class='info' href='#RFC5280'>[RFC5280]<span> (</span><span class='info'>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile,&rdquo; May&nbsp;2008.</span><span>)</span></a> に従って確認する. 検証エラーが発生した場合には, そのJWSを拒否しなければならない (MUST).
        このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<p>
	    <tt>x5c</tt> の例については <a class='info' href='#x5cExample'>Appendix&nbsp;B<span> (</span><span class='info'>&quot;x5c&quot; (X.509 Certificate Chain) Example</span><span>)</span></a> を参照.
	  
</p>
<a name="kidDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.7"></a><h3>4.1.7.&nbsp;
"kid" (Key ID) Header Parameter</h3>

<p>
	    <tt>kid</tt> (key ID)ヘッダパラメータはJWSを保護するためにどの鍵が使用されたかを示しているヒントである.
        このパラメータは発信者が鍵の変更を受信者に明確に示すことを許す.
        受信者が <tt>kid</tt> の値に一致する鍵を見つけることができないならば, その状態をエラーとして扱うべきである (SHOULD).
        <tt>kid</tt> の値の説明は記載しない.
        その値は文字列でなければならない (MUST).
        このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<p>
        JWKを利用する場合, <tt>kid</tt> の値はJWK <tt>kid</tt> パラメータの値と一致するように利用できる.
	  
</p>
<a name="typDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.8"></a><h3>4.1.8.&nbsp;
"typ" (Type) Header Parameter</h3>

<p>
	    <tt>typ</tt> (type) ヘッダパラメータは, これがアプリケーションにとって有用かどうかという文脈の中でアプリケーションに特化した方法でこの完全なJWSオブジェクトの種類を表すために用いられてもよい (MAY).
        このパラメータはJWSの処理に影響を及ぼさない.
	    <tt>JOSE</tt> という値はアプリケーションによりこのオブジェクトがJWS Compact Serializationを用いたJWSもしくはJWE Compact Serializationを用いたJWEであることを示すために用いられてもよい (MAY).
	    <tt>JOSE+JSON</tt> という値はアプリケーションによりこのオブジェクトがJWS JSON Serialiationを用いたJWSもしくはJWE JSON Serializationを用いたJWEであることを示すために用いられてもよい (MAY).
        その他の値も用いられても良く(MAY), もし理解されなかった場合は無視されるべきである (SHOULD).
	    <tt>typ</tt> の値は文字列であり, 大文字・小文字を区別する.
        このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<p>
	    MIME Media Type <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> の値は <tt>typ</tt> の値として用いられてもよい (MAY).
	  
</p>
<p>
	    <tt>typ</tt> の値は IANA JSON Web Signature and Encryption Type Values レジストリ <a class='info' href='#TypReg'>Section&nbsp;8.2<span> (</span><span class='info'>JSON Web Signature and Encryption Type Values Registry</span><span>)</span></a> に登録されるか衝突耐性を持つ名前空間を含む値であるべきである (SHOULD).
	  
</p>
<a name="ctyDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.9"></a><h3>4.1.9.&nbsp;
"cty" (Content Type) Header Parameter</h3>

<p>
	    <tt>cty</tt> (content type) ヘッダパラメータは, これがアプリケーションにとって有用かどうかという文脈の中でアプリケーションに特化した方法で保護されているコンテント(ペイロード)の種類を表すために用いられてもよい (MAY).
        このパラメータはJWSの処理に影響を及ぼさない.
        コンテントタイプの値が理解されなかった場合は無視されるべきである (SHOULD).
	    <tt>cty</tt> の値は文字列であり, 大文字・小文字を区別する.
        このヘッダパラメータの利用は任意 (OPTIONAL) である.
	  
</p>
<p>
	    <tt>cty</tt> ヘッダパラメータに用いられる値は <tt>typ</tt> ヘッダパラメータと同じ値空間となり, 同じ規則が適用される.
	  
</p>
<a name="critDef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.10"></a><h3>4.1.10.&nbsp;
"crit" (Critical) Header Parameter</h3>

<p>
	    <tt>crit</tt> (critical) ヘッダパラメータは必ず理解され処理されなければならない (MUST) この仕様に対する拡張を示す.
        その値はJWSヘッダ内で用いられるこれらの拡張機能によって定義されたヘッダパラメータ名が記載された配列である.
        もし記載された拡張ヘッダパラメータが受信者により理解されずサポートされない場合, そのJWSは拒否されなければならない (MUST).
        送信者はこの仕様もしくはJWS利用のために <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a> により定義されているヘッダパラメータ, 重複した名前, JWSヘッダに現れないヘッダパラメータ名を <tt>crit</tt> リストに含めてはならない (MUST NOT).
        送信者は <tt>crit</tt> の値に空のリスト <tt>[]</tt> を用いてはならない (MUST NOT).
        もしcriticalリストがこの仕様もしくはJWS利用のために <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a> で定義されている, その利用が違反であるその他の制約により定義されている任意のヘッダパラメータを含むとき, 受信者はそのJWSを拒否してもよい (MAY).
        このヘッダパラメータは完全に保護されなければならず (MUST), 従って利用されるときは必ずJWSプロテクトヘッダのみに現れなければならない (MUST).
        このヘッダパラメータの利用は任意 (OPTIONAL) である.
        実装はこのヘッダパラメータを理解しなければならない (MUST).
	  
</p>
<p>
	    
<p>
          <tt>exp</tt> (expiration-time)フィールドを加えたと仮定した使用例 :
	      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"ES256",
   "crit":["exp"],
   "exp":1363284000
  }
</pre></div>
	  

<a name="PublicHeaderParameterName"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Public Header Parameter Names</h3>

<p>
      JWS利用者により, 追加のヘッダパラメータ名を定義することができる.
      しかしながら, 衝突を防ぐために, 新しいヘッダパラメータ名は IANA JSON Web Signature and Encryption Header Parameters レジストリ <a class='info' href='#HdrReg'>Section&nbsp;8.1<span> (</span><span class='info'>JSON Web Signature and Encryption Header Parameters Registry</span><span>)</span></a> に登録されるか, またはパブリックな名前(衝突耐性を持つ名前空間を含む)となるべきである (SHOULD).
      それぞれのケースにおいて, 名前もしくは値の定義者はヘッダパラメータ名を定義するために用いる名前空間の一部を制限していることを保証するために適切な注意を払う必要がある.
	
</p>
<p>
      新しいヘッダパラメータはそれらが非互換なJWSが生じ得るため, 慎重に導入されるべきである.
	
</p>
<a name="PrivateHeaderParameterName"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Private Header Parameter Names</h3>

<p>
      JWSの生産者と消費者は, 予約済パラメータ名 <a class='info' href='#ReservedHeaderParameterName'>Section&nbsp;4.1<span> (</span><span class='info'>Reserved Header Parameter Names</span><span>)</span></a> やパブリックパラメータ名 <a class='info' href='#PublicHeaderParameterName'>Section&nbsp;4.2<span> (</span><span class='info'>Public Header Parameter Names</span><span>)</span></a> ではないプライベートパラメータ名であるヘッダパラメータを用いることに同意してもよい.
      パブリックな名前とは異なり, プライベートな名前は衝突しやすく注意して利用すべきである.
	
</p>
<a name="JWSRules"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Producing and Consuming JWSs</h3>

<a name="MessageSigning"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Message Signing or MACing</h3>

<p>
	  JWSを作成するためには, 以下の手順を踏まなければならない (MUST).
      手順の順序は, それぞれの手順の入力と出力の間に依存関係がない場合には重要ではない.

	  </p>
<ol class="text">
<li>
	      JWSペイロードとして利用されるコンテンツを作成する.
	    
</li>
<li>
          JWSペイロードのオクテット列をbase64urlエンコードする. このエンコード結果がエンコード済みJWSペイロードとなる.
	    
</li>
<li>
	      希望のヘッダパラメータのセットを含んだJWSヘッダを作成する. 空白がその表現の中に存在することが明示的に許可されること, そしてエンコード前に正規化が必要ないことに注意する.
	    
</li>
<li>
	      JWSプロテクトヘッダのUTF-8表現のオクテット列をbase64urlエンコードし, エンコード済みJWSヘッダを作成する.
	      JWSプロテクトヘッダが存在しない場合(JWS JSON Serializationを利用していて, <tt>protected</tt> 要素が存在しない場合のみに発生する),
	      エンコード済みJWSヘッダは空文字列にする.
	    
</li>
<li>
	      JWS署名入力(エンコード済みJWSヘッダ, ピリオド ('.'), そしてエンコード済みJWSペイロードの連結文字列)に対して適用される特定のアルゴリズムで定義されている方法でJWS署名を算出する.
	      <tt>alg</tt> (アルゴリズム)ヘッダパラメータは, JWSヘッダに存在し, JWS署名を生成するために利用されるアルゴリズムを正確に表すアルゴリズム名を値としなければならない (MUST).
	    
</li>
<li>
	      JWS署名をbase64urlエンコードし, エンコード済みJWS署名を作成する.
	    
</li>
<li>
	      これらの３つのエンコード部分がJWS Compact Serialization表現とJWS JSON Serialization表現の双方で利用される結果値となる.
	    
</li>
<li>
	      JWS JSON Serializationが利用される場合には, 適用対象となる各デジタル署名, もしくはMAC値毎にこのプロセスを繰り返す.
	    
</li>
<li>
	      希望の形式のシリアライズ結果を作成する.
	      結果のJWS Compact Serializationは, エンコード済みJWSヘッダとエンコード済みJWSペイロード, そしてエンコード済みJWS署名をこの順で連結したもので,
	      この３つの文字列は２つのピリオド('.')で分けられる.
	      JWS JSON Serializationについては <a class='info' href='#JSONSerialization'>Section&nbsp;7.2<span> (</span><span class='info'>JWS JSON Serialization</span><span>)</span></a>で述べられる.
	    
</li>
</ol><p>
	
</p>
<a name="MessageValidation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Message Signature or MAC Validation</h3>

<p>
      JWSの正当性を評価する時には, 以下の手順を踏まなければならない (MUST).
      手順の順序は, それぞれの手順の入力と出力に依存関係がない場合には重要ではない.
      列挙されている手順のいずれかで異常が発生した場合には, JWSは拒否されなければならない (MUST).
    
</p>
<p>
      </p>
<ol class="text">
<li>
          シリアライズされた入力をパーズしJWSヘッダ, エンコード済みJWSペイロード, そしてエンコード済みJWS署名の値を確定する.
          JWS Compact Serializationを利用している場合には, エンコード済みJWSヘッダ, エンコード済みJWSペイロード, そしてエンコード済みJWS署名が, この順で二つのピリオド('.')によって分けられた文字列として表される.
          JWS JSON Serializationについては <a class='info' href='#JSONSerialization'>Section&nbsp;7.2<span> (</span><span class='info'>JWS JSON Serialization</span><span>)</span></a>で述べられる.
        
</li>
<li>
          エンコード済みJWSヘッダは, 穴埋め文字は利用されないというこの仕様の制約に従ってbase64urlデコードされなければならない (MUST).
        
</li>
<li>
          エンコード済みJWSヘッダをbase64urlでデコードした結果を, JWSプロテクトヘッダ値とする.
        
</li>
<li>
          結果として得られたJWSプロテクトヘッダは, <a class='info' href='#RFC4627'>RFC 4627<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4627]に従った完全に有効なJSONオブジェクトでなければならない (MUST).
        
</li>
<li>
          JWS Compact Serializationを利用している場合, JWSプロテクトヘッダをJWSヘッダとする;
          さもなければ, JWS JSON Serializationを利用して,
          JWSヘッダを, 対応する <tt>protected</tt>ヘッダパラメータの値と <tt>header</tt>ヘッダパラメータの値の和集合とし,
          すべてを完全に有効なJSONオブジェクトとしなければならない.
        
</li>
<li>
          結果のJWSヘッダは重複したヘッダパラメータ名を含んではならない (MUST NOT).
          JWS JSON Serializationを利用する場合は, この制約は, 共にJWSヘッダを含んだ, それぞれ別個のJSON Textオブジェクトの中に同じヘッダパラメータ名は存在してはならないことも含む (MUST NOT).
        
</li>
<li>
          結果のJWSヘッダは, シンタックスやセマンティックスが理解され, かつサポートされている, もしくは理解されない場合には無視するよう指定されたパラメータやその値のみ含んでいることを確認されなければならない (MUST).
        
</li>
<li>
          エンコード済みJWSペイロードは穴埋め文字は利用されないというこの仕様の制約に従ってbase64urlデコードされなければならない (MUST).
        
</li>
<li>
          エンコード済みJWS署名は穴埋め文字は利用されないというこの仕様の制約に従ってbase64urlデコードされなければならない (MUST).
        
</li>
<li>
          JWS署名は, JWS署名入力(エンコード済みJWSヘッダ, ピリオド ('.'), そしてエンコード済みJWSペイロードの連結文字列)に対して適用されているアルゴリズムで定義された方法で検証されなければならない (MUST).
          アルゴリズムは <tt>alg</tt>(アルゴリズム)ヘッダパラメータの値として正確に示されなければならない (MUST).
          このヘッダパラメータは存在していなければならない (MUST).
        
</li>
<li>
          JWS JSON Serializationが利用されている場合には, 含まれている各デジタル署名, もしくはMAC値毎にこのプロセスを繰り返す.
        
</li>
</ol><p>
    
</p>
<a name="StringComparison"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
String Comparison Rules</h3>

<p>
      JWSの処理は必然的に既知の文字列とJSONオブジェクトの値を比較することを要求する. 例えばアルゴリズムが何であるかをチェックする場合, <tt>alg</tt>をエンコードしたUnicode文字列がJWSヘッダの要素名と照合され,
      マッチするヘッダパラメータ名があるかどうかを確かめる.
      同様のプロセスが <tt>alg</tt>ヘッダパラメータの値がサポートされているアルゴリズムであるかどうか判定するときにも発生する.
    
</p>
<p>
      JSON文字列とその他のUnicode文字列の比較は以下の手順で実施されなければならない (MUST):

      </p>
<ol class="text">
<li>
          JSONのエスケープを入力JSON文字列から取り除き, その文字列をUnicodeのコードポイント列に変換する.
        
</li>
<li>
          同様に比較対象文字列をUnicodeのコードポイント列に変換する.
        
</li>
<li>
          Unicode正規化 <a class='info' href='#USA15'>[USA15]<span> (</span><span class='info'>Davis, M., Whistler, K., and M. Deurst, &ldquo;Unicode Normalization Forms,&rdquo; 09&nbsp;2009.</span><span>)</span></a>はJSON文字列, もしくはそれと比較される文字列について, いかなる時点においても適用されるべきではない (MUST NOT).
        
</li>
<li>
          二つの文字列の比較はUnicodeのコードポイントどうしの等価比較として実行されなければならない (MUST).
          (もともと異なるUnicodeのエンコード方式(UTF-8, UTF-16, など.)を利用していた値どうしはそれぞれ同じコードポイントになる可能性があることに注意する.)
        
</li>
</ol><p>
    
</p>
<p>
      JSONのセキュリティ考慮事項 <a class='info' href='#JSONSecCon'>Section&nbsp;9.2<span> (</span><span class='info'>JSON Security Considerations</span><span>)</span></a>とUnicodeのセキュリティ考慮事項 <a class='info' href='#UnicodeSecCon'>Section&nbsp;9.3<span> (</span><span class='info'>Unicode Comparison Security Considerations</span><span>)</span></a>も参照すること.
    
</p>
<a name="IDingKeys"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Key Identification</h3>

<p>
        JWSの受信者は, デジタル署名またはMAC処理に使用された鍵を決定できる必要がある.
        適用された鍵は<a class='info' href='#ReservedHeaderParameterName'>Section&nbsp;4.1<span> (</span><span class='info'>Reserved Header Parameter Names</span><span>)</span></a>で説明されているヘッダパラメータによって, まには本仕様のスコープ外の方法で識別することができる.
        特に, ヘッダパラメータ
	<tt>jku</tt>,
	<tt>jwk</tt>,
	<tt>x5u</tt>,
	<tt>x5t</tt>,
	<tt>x5c</tt>,
	および <tt>kid</tt>
        は鍵の識別のために用意されている.
        送信者は鍵を識別するために十分な情報をヘッダパラメータに含めるべきである(SHOULD).
        ただし, アプリケーションが他の手段やコンベンションによって使用する鍵を識別する場合にはこの限りではない.
        受信者は, 指定されたアルゴリズムが鍵を必要とする場合であり(実際, <tt>none</tt>以外のすべてのアルゴリズムは鍵を必要とする), 使用する鍵が識別できない場合には, 入力を拒否しなければならない(MUST).
      
</p>
<a name="Serializations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Serializations</h3>

<p>
	JWSオブジェクトは2通りのシリアライズ形式を使用する. JWS Compact Serialization および JWS JSON Serializationである.
        JWS Compact Serializationの実装は必須である.
	JWS JSON Serializationの実装はオプショナルである(OPTIONAL).
      
</p>
<a name="CompactSerialization"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
JWS Compact Serialization</h3>

<p>
	  JWS Compact Serializationはデジタル署名された, またはMACを行ったコンテンツをコンパクトなURL-safe文字列として表現したものである.
          この文字列は, エンコード済JWSヘッダ, エンコード済JWSペイロード, およびエンコード済JWS署名を, この順序で2つのピリオド('.')文字を区切り文字として連結したものである.
          JWS Compact Serializationでサポートされる署名ないしMACはひとつだけである.
	
</p>
<a name="JSONSerialization"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
JWS JSON Serialization</h3>

<p>
	  JWS JSON Serializationははデジタル署名された, またはMACを行ったコンテンツをJSONオブジェクトとして表現したものである.
	  JWS Compact Serializationとは違い, JWS JSON Serializationを使用したコンテンツは複数のデジタル署名および/またはMAC値で保護することができる.
	
</p>
<p>
          JWS JSON Serializationの表現はJWS Compact Serializationで使われる表現と強く関連しており, 以下の点に違いがある:
          
	  </p>
<ul class="text">
<li>
	      JWS JSON Serializationの中にある値は, ピリオド('.')文字を区切りとしたbase64url文字列としてではなく, JSONオブジェクトのメンバとして表現される.
              (ただし, バイナリ値および完全性を保護された値はbase64urlエンコードされる.)
	    
</li>
<li>
	      エンコード済JWSペイロード値は<tt>payload</tt>メンバに格納される.
	    
</li>
<li>
              署名および/またはMAC値は, ひとつに限らず, 複数存在してもよい.
              <tt>signatures</tt>メンバはJSON配列であり,
              特定の署名またはMAC算出に使われる値を格納するために使われる.
              配列の1要素が署名/MACひとつに対応する.
              これらの要素はそれぞれJSONオブジェクトである.
	    
</li>
<li>
              各エンコード済JWS署名値は, 空でない限り, <tt>signatures</tt>配列の要素であるJSONオブジェクトの<tt>signature</tt>メンバに格納される.
	    
</li>
<li>
              各エンコード済JWSヘッダ値は, 署名/MAC算出に用いるヘッダパラメータ値の集合をbase64urlエンコードしたものであり, 空でない限り, <tt>signatures</tt>配列の対応する要素オブジェクトの<tt>protected</tt>メンバに格納される.
	    
</li>
<li>
	      JWS Compact Serializationとは違い, JWS JSON Serializationは署名/MAC算出に用いられないヘッダパラメータ値を含むこともできる.
              これらの保護されないヘッダパラメータ値は, 存在すれば, エンコードされないJSONテキストオブジェクトとして, <tt>signatures</tt>配列の対応する要素オブジェクトの<tt>header</tt>メンバに格納される.
	    
</li>
<li>
              それぞれの署名またはMAC値の算出ないし検証に使用されるヘッダパラメータ値は, 以下の2つのヘッダパラメータ値の和集合である:
              (1)完全性を保護された署名/MACごとの値であり, 署名/MACに対応する配列要素の<tt>protected</tt>メンバに格納されている,
              (2)完全な保護のなされていない署名/MACごとの値であり, 署名/MACに対応する配列要素の<tt>header</tt>メンバに格納されている,
              これらのヘッダパラメータ値の和集合がJWSヘッダとなる.
              2つの場所にあるヘッダパラメータ名は共通するものがあってはならない(MUST be disjoint).
	    
</li>
</ul><p>
	
</p>
<p>
	    JWS JSON Serializationを用いたJWSの形式は以下の通りである:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "payload":"&lt;ペイロードコンテンツ&gt;"
   "signatures":[
    {"protected":&lt;完全性を保護されたヘッダ 1 のコンテンツ&gt;",
     "header":"&lt;完全性を保護されないヘッダ 1 のコンテンツ&gt;",
     "signature":"&lt;署名 1 のコンテンツ&gt;"},
    ...
    {"protected":&lt;完全性を保護されたヘッダ N のコンテンツ&gt;",
     "header":"&lt;完全性を保護されないヘッダ N のコンテンツ&gt;",
     "signature":"&lt;署名 N のコンテンツ&gt;"}],
  }
</pre></div>
<p>
          これらのメンバのうち,
	  <tt>payload</tt>,
	  <tt>signatures</tt>,
	  および<tt>signature</tt>は存在しなければならない(MUST).
	  <tt>protected</tt>および
	  <tt>header</tt>の少なくとも一方は存在しなければならず(MUST), 各署名/MAC算出に対応する<tt>alg</tt>ヘッダパラメータ値を含むものとする.
	
</p>
<p>
          エンコード済JWSペイロード値およびエンコード済JWS署名値のコンテンツは, 正確に本仕様の他の部分で定義されるとおりである.
          これらの値は, 対応するエンコード済JWS署名およびヘッダパラメータ値の集合が生成・検証される場合と同じ方法で解釈・検証される.
          使用されるJWSヘッダ値は, 上述のとおり, 対応する<tt>protected</tt>および <tt>header</tt>メンバの和集合である.
	
</p>
<p>
          各JWS署名値はJWS署名入力に対し, 対応するJWSヘッダ値をJWS Compact Serializationの場合と同様の方法で適用して算出する.
          これにより, <tt>signatures</tt>配列内のエンコード済JWS署名値が, JWS Compact Serializationにおいて同一のパラメータを用いた場合に得られるであろう値と一致するという望ましい特性が得られる.
          これはその署名/MACの算出に用いられるエンコード済JWSヘッダ値(つまり完全性を保護されたヘッダパラメータ値を表現したもの)が, JWS Compact Serializationで用いられるものと一致する限りにおいて正しい.
	
</p>
<p>
          JWS JSON Serializationを用いたJWSの算出例については <a class='info' href='#JSONSerializationExample'>Appendix&nbsp;A.6<span> (</span><span class='info'>Example JWS Using JWS JSON Serialization</span><span>)</span></a> を参照.
	
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>
      以下の登録手順は, この仕様によって定められる全てのレジストリで利用される.
      
</p>
<p>
      値は1名以上の Designated Experts の勧告に従い, [TBD]@ietf.orgのメーリングリストで2週間のレビュー期間の後にSpecification Required <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a> な状態で登録される.
      しかしながら, 発行に先立ちそれらの値を割り当てることができるように Designated Expert(s) はそれらの値が公開できる状態になった時点で登録を許可することもありうる.
      
</p>
<p>
      登録要請は, 適切な件名 (例: "Request for access token type: example") で [TBD]@ietf.org のメーリングリストに通知しなければならず, そこでレビューとコメントが行われる.
      [[ RFC-EDITORへの注意: メーリングリストの名前は, IESGとIANAと協議の上, 決定されるべきである. 提案される名前: jose-reg-review ]]
      
</p>
<p>
      Designated Expert(s) はレビュー期間内に登録申請を承認または拒否し, レビューが行われるメーリングリストおよび IANA へその決定を告げる.
      要請が拒否された場合は, その理由が通知され, 可能な場合は申請の成功に向けた提案が行われるべきである.
      
</p>
<p>
      IANA は Designated Expert(s) からのレジストリ更新のみを受け付けなければならず, 登録のために全ての申請をレビューが行われるメーリングリストに送られるべきである.
      
</p>
<a name="HdrReg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
JSON Web Signature and Encryption Header Parameters Registry</h3>

<p>
    この仕様は, JWSとJWEのヘッダパラメータ名の予約ために IANA JSON Web Signature and Encryption Header Parameters レジストリを定める.
    レジストリは, 予約されるヘッダパラメータ名とそれを定める仕様への参照を登録する.
    パラメータの利用が仕様間で互換性を持つならば, 同じヘッダパラメータ名は複数回登録されても良い (MAY).
    同じヘッダパラメータ名の異なる登録は, 利用箇所が異なるのが一般的である.
	
</p>
<a name="HdrTemplate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.1"></a><h3>8.1.1.&nbsp;
Registration Template</h3>

<p>
            </p>
<blockquote class="text"><dl>
<dt>Header Parameter Name:</dt>
<dd>
                
                申請される名前 (例: "example").
                この名前は大文字・小文字を区別する.
                大文字・小文字を同一視すると, 他に登録されている名前と一致するものは受け入れられるべきではない (SHOULD NOT).
              
</dd>
<dt>Header Parameter Usage Location(s):</dt>
<dd>
                
                ヘッダパラメータの使用箇所は <tt>JWS</tt> もしくは <tt>JWE</tt> のうちの1つ以上であるべき.
              
</dd>
<dt>Change Controller:</dt>
<dd>
                
                標準化過程のRFCについては, "IETF"とする.
                その他については, 責任を追う団体の名前を与える.
                その他の詳細情報 (例: 郵便番号, メールアドレス, ホームページURI) も含まれても良い.
              
</dd>
<dt>Specification Document(s):</dt>
<dd>
                
                パラメータを規定するドキュメントの参照であり, そのドキュメントの複製を取得するために利用可能なURIを含むことが望ましい.
                関連する節の表示も含まれて良いが, 必須ではない.
              
</dd>
</dl></blockquote><p>
          
</p>
<a name="HdrContents"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.2"></a><h3>8.1.2.&nbsp;
Initial Registry Contents</h3>

<p>
      本仕様はこのレジストリに <a class='info' href='#ReservedHeaderParameterName'>Section&nbsp;4.1<span> (</span><span class='info'>Reserved Header Parameter Names</span><span>)</span></a> にて定義されているヘッダパラメータ名を登録する.
	  
</p>
<p> 
            </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>alg</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#algDef'>Section&nbsp;4.1.1<span> (</span><span class='info'>&quot;alg&quot; (Algorithm) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>jku</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#jkuDef'>Section&nbsp;4.1.2<span> (</span><span class='info'>&quot;jku&quot; (JWK Set URL) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>jwk</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification document(s): <a class='info' href='#jwkDef'>Section&nbsp;4.1.3<span> (</span><span class='info'>&quot;jwk&quot; (JSON Web Key) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>x5u</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#x5uDef'>Section&nbsp;4.1.4<span> (</span><span class='info'>&quot;x5u&quot; (X.509 URL) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>x5t</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#x5tDef'>Section&nbsp;4.1.5<span> (</span><span class='info'>&quot;x5t&quot; (X.509 Certificate Thumbprint) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>x5c</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#x5cDef'>Section&nbsp;4.1.6<span> (</span><span class='info'>&quot;x5c&quot; (X.509 Certificate Chain) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>kid</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#kidDef'>Section&nbsp;4.1.7<span> (</span><span class='info'>&quot;kid&quot; (Key ID) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>typ</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#typDef'>Section&nbsp;4.1.8<span> (</span><span class='info'>&quot;typ&quot; (Type) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>cty</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#ctyDef'>Section&nbsp;4.1.9<span> (</span><span class='info'>&quot;cty&quot; (Content Type) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
          
</p>
<p>
	    </p>
<ul class="text">
<li>
                Header Parameter Name: <tt>crit</tt>
              
</li>
<li>
		Header Parameter Usage Location(s): JWS
	      
</li>
<li>
                Change Controller: IETF
              
</li>
<li>
                Specification Document(s): <a class='info' href='#critDef'>Section&nbsp;4.1.10<span> (</span><span class='info'>&quot;crit&quot; (Critical) Header Parameter</span><span>)</span></a> of [[ this document ]]
              
</li>
</ul><p>
          
</p>
<a name="TypReg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
JSON Web Signature and Encryption Type Values Registry</h3>

<p>
    この仕様は, JWSとJWEの <tt>typ</tt> (type) ヘッダパラメータ値の予約ために IANA JSON Web Signature and Encryption Type Values レジストリを定める.
    全ての登録される <tt>typ</tt> の値は, それが短い名前として表すMIME Media Type <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> の値を含むことを推奨する (RECOMMENDED).
    レジストリは, <tt>typ</tt> の値, それが省略形となる(ものがあれば) MIME type の値とそれを定める仕様への参照を登録する.
	
</p>
<p>
	MIME Media Type <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> の値は新しい <tt>typ</tt> の値としてそのまま登録されてはならない (MUST NOT);
    むしろ, 新しい <tt>typ</tt> の値は MIME Typesを短縮した名前として登録されても良い (MAY).
	
</p>
<a name="TypTemplate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.1"></a><h3>8.2.1.&nbsp;
Registration Template</h3>

<p>
            </p>
<blockquote class="text"><dl>
<dt>"typ" Header Parameter Value:</dt>
<dd>
                
                申請される名前 (例: "example").
                この名前は大文字・小文字を区別する.
                大文字・小文字を同一視すると, 他に登録されている名前と一致するものは受け入れられるべきではない (SHOULD NOT).
              
</dd>
<dt>Abbreviation for MIME Type:</dt>
<dd>
                
                この名前が省略形となるMIME Type (例: "application/example").
              
</dd>
<dt>Change Controller:</dt>
<dd>
                
                標準化過程のRFCについては, "IETF"とする.
                その他については, 責任を追う団体の名前を与える.
                その他の詳細情報 (例: 郵便番号, メールアドレス, ホームページURI) も含まれても良い.
              
</dd>
<dt>Specification Document(s):</dt>
<dd>
                
                パラメータを規定するドキュメントの参照であり, そのドキュメントの複製を取得するために利用可能なURIを含むことが望ましい.
                関連する節の表示も含まれて良いが, 必須ではない.
              
</dd>
</dl></blockquote><p>
          
</p>
<a name="TypContents"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.2"></a><h3>8.2.2.&nbsp;
Initial Registry Contents</h3>

<p>
      本仕様はこのレジストリで <tt>JOSE</tt> と <tt>JOSE+JSON</tt> というtype値を登録する.
	  
</p>
<p> 
	    </p>
<ul class="text">
<li>
		"typ" Header Parameter Value: <tt>JOSE</tt>
	      
</li>
<li>
		Abbreviation for MIME type: application/jose
	      
</li>
<li>
		Change Controller: IETF
	      
</li>
<li>
		Specification Document(s): <a class='info' href='#typDef'>Section&nbsp;4.1.8<span> (</span><span class='info'>&quot;typ&quot; (Type) Header Parameter</span><span>)</span></a> of [[ this document ]]
	      
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		"typ" Header Parameter Value: <tt>JOSE+JSON</tt>
	      
</li>
<li>
		Abbreviation for MIME type: application/jose+json
	      
</li>
<li>
		Change Controller: IETF
	      
</li>
<li>
		Specification Document(s): <a class='info' href='#typDef'>Section&nbsp;4.1.8<span> (</span><span class='info'>&quot;typ&quot; (Type) Header Parameter</span><span>)</span></a> of [[ this document ]]
	      
</li>
</ul><p>
	  
</p>
<a name="MediaReg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Media Type Registration</h3>

<a name="MediaContents"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.1"></a><h3>8.3.1.&nbsp;
Registry Contents</h3>

<p>
      本仕様は, コンテンツがJWS Compact Serializationを利用するJWS もしくはJWE Compact Serializationを利用するJWEであることを示すために用いられる <tt>application/jose</tt> というMedia Type <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> をMIME Media Typeレジストリ <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a> に登録し, コンテンツがJWS JSON Serializationを利用するJWSもしくはJWE JSON Serializationを利用するJWEであることを示すために用いられる <tt>application/jose+json</tt> というMedia TypeをMIME Media Typeレジストリに登録する.
	  
</p>
<p> 
	    </p>
<ul class="text">
<li>
		Type name: application
	      
</li>
<li>
		Subtype name: jose
	      
</li>
<li>
		Required parameters: n/a
	      
</li>
<li>
		Optional parameters: n/a
	      
</li>
<li>
		Encoding considerations:
        application/joseの値は, ピリオド('.')文字により分割された(空の文字列であることもありうる)Base64 URLエンコードされた一連の文字列としてエンコードされる.
	      
</li>
<li>
		Security considerations: See the Security Considerations section of [[ this document ]]
	      
</li>
<li>
		Interoperability considerations: n/a
	      
</li>
<li>
		Published specification: [[ this document ]]
	      
</li>
<li>
		Applications that use this media type:
		OpenID Connect, Mozilla Persona, Salesforce, Google, numerous others that use signed JWTs
	      
</li>
<li>
		Additional information:
		Magic number(s): n/a,
		File extension(s): n/a,
		Macintosh file type code(s): n/a
	      
</li>
<li>
		Person &amp; email address to contact for further information:
		Michael B. Jones, mbj@microsoft.com
	      
</li>
<li>
		Intended usage: COMMON
	      
</li>
<li>
		Restrictions on usage: none
	      
</li>
<li>
		Author: Michael B. Jones, mbj@microsoft.com
	      
</li>
<li>
		Change Controller: IETF
	      
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		Type name: application
	      
</li>
<li>
		Subtype name: jose+json
	      
</li>
<li>
		Required parameters: n/a
	      
</li>
<li>
		Optional parameters: n/a
	      
</li>
<li>
		Encoding considerations:
        application/jose+jsonの値は, JSONオブジェクトとして表現される;
        そのJSONオブジェクトのためにUTF-8エンコードが用いられるべき (SHOULD).
	      
</li>
<li>
		Security considerations: See the Security Considerations section of [[ this document ]]
	      
</li>
<li>
		Interoperability considerations: n/a
	      
</li>
<li>
		Published specification: [[ this document ]]
	      
</li>
<li>
		Applications that use this media type:
		TBD
	      
</li>
<li>
		Additional information:
		Magic number(s): n/a,
		File extension(s): n/a,
		Macintosh file type code(s): n/a
	      
</li>
<li>
		Person &amp; email address to contact for further information:
		Michael B. Jones, mbj@microsoft.com
	      
</li>
<li>
		Intended usage: COMMON
	      
</li>
<li>
		Restrictions on usage: none
	      
</li>
<li>
		Author: Michael B. Jones, mbj@microsoft.com
	      
</li>
<li>
		Change Controller: IETF
	      
</li>
</ul><p>
	  
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<a name="CryptoSecCon"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Cryptographic Security Considerations</h3>

<p>
	  どんな暗号化アプリケーションも直面するセキュリティ上の課題すべてに, JWS/JWE/JWKエージェントも立ち向かわなければならない. なかでもユーザの秘密鍵と共通鍵を保護すること, さまざま攻撃を阻止すること, そして不注意で間違った受信者へのメッセージを暗号化するような誤操作を避ける手助けをすることが課題である. セキュティ上の考慮事項の完全なリスト化は本ドキュメントの範囲外がであるが, ここにいくつかの重要な事項を列挙する.
	
</p>
<p>
	  <a class='info' href='#W3C.CR-xmldsig-core2-20120124'>XML DSIG 2.0<span> (</span><span class='info'>Eastlake, D., Reagle, J., Yiu, K., Solo, D., Datta, P., Hirsch, F., Cantor, S., and T. Roessler, &ldquo;XML Signature Syntax and Processing Version 2.0,&rdquo; January&nbsp;2012.</span><span>)</span></a> [W3C.CR&#8209;xmldsig&#8209;core2&#8209;20120124]にあるすべてのセキュリティ上考慮すべき事項は, XMLに特化したもの以外はすべて本仕様にも当てはまる. 同様に<a class='info' href='#W3C.WD-xmldsig-bestpractices-20110809'>XML Signature Best Practices<span> (</span><span class='info'>Datta, P. and F. Hirsch, &ldquo;XML Signature Best Practices,&rdquo; August&nbsp;2011.</span><span>)</span></a> [W3C.WD&#8209;xmldsig&#8209;bestpractices&#8209;20110809]に記載されているベストプラクティスの多くも, XMLに特化したもの以外は本仕様に適用できる.
	
</p>
<p>
	  鍵は生成するために使われるエントロピー量と同じ強度にしかならない. 最低128ビットのエントロピーがすべての鍵に利用されるべきである. アプリケーションコンテクストによってはもっと多くのエントロピーが必要になるかもしれない. 特にいくつかのブラウザやアプリケーション環境では十分ランダムな数値を生成するのが難しいかもしれない.
	
</p>
<p>
	  JWSの作成者は, 第三者によって制御されないエントロピーを追加することをせずに第三者が任意のコンテンツをメッセージに挿入することを許すべきではない.
	
</p>
<p>
	  情報取得のためにTLSを利用する場合には, リソースを提供する機関は本物であることを証明されなければならない(MUST).
	  そして取得される情報は改変不能でなければならない(MUST).
	
</p>
<p>
	  暗号化アルゴリズムが成功時と失敗時で処理時間に差があるように実装されている場合, 攻撃者は処理時間の差を利用して利用されている鍵についての情報を取得することができかもしれない. 故にそのような処理時間の差は避けなければならない.
	
</p>
<p>
	  互換性の理由からSHA-1ハッシュが <tt>x5t</tt> (x.509証明書のフィンガープリント) の値を算出するのに利用される.
	  SHA-1ハッシュ値の衝突を引き起こす効率的な方法が開発され, 攻撃者が任意のシステムの既知の証明書の利用を妨害したい場合,
	  SHA-1ハッシュの値が同じ証明書をもう一つ作成し, それを狙われた被害者の証明書ストアに加えることで妨害は実現される可能性がある.
      この攻撃の前提は攻撃者が狙われた被害者の証明書ストアへの書き込み権限をもつことである.
	
</p>
<p>
	  将来, 証明書のフィンガープリントをSHA-1以外のハッシュ関数で算出する必要が出てきた場合, そのために追加の関連ヘッダパラメータを定義することが推奨される. 例えば,
	  新しい <tt>x5t#S256</tt> (SHA-256を使ったX.509証明書のフィンガープリント)というヘッダパラメータを定義して利用することが推奨される.
	
</p>
<a name="JSONSecCon"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
JSON Security Considerations</h3>

<p>
      厳密なJSONの検証はセキュリティ上必要である.
      不正な形式のJSONを受け取った場合, 送信者の意図を確実に識別することは不可能である.
      使用されるJSONパーサーが不正な構文のJSONを拒否しない場合, 不明瞭かつ潜在的に悪用可能な状況が起こりうる.
	
</p>
<p>
      本仕様では"オブジェクト内のヘッダパラメータ名はユニークでなければならない(MUST). つまり, 受信者はヘッダパラメータ名が重複したJWSを拒否するか, ECMAScript 5.1 <a class='info' href='#ECMAScript'>[ECMAScript]<span> (</span><span class='info'>Ecma International, &ldquo;ECMAScript Language Specification, 5.1 Edition,&rdquo; June&nbsp;2011.</span><span>)</span></a>のSection 15.12で規定されているように, 重複したメンバ名から字面上で最後のもののみを返すJSONパーサーを使うかのどちらかをしなければならない(MUST)"と述べているのに対し, JavaScript Object Notation (JSON) 仕様書 <a class='info' href='#RFC4627'>[RFC4627]<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a>のSection 2.2では"オブジェクト内の名前はユニークであるべき (SHOULD)"と述べられている.
      したがって, 本仕様では, Section 2.2内の"SHOULD"は送信者により"MUST"として扱われ, 受信者により"MUST"として扱われるか, もしくはECMAScript 5.1で規定されている方法で扱われることを必要としている.
      使用されるJSONパーサーがメンバ名のユニーク性を強制しない, もしくは重複したメンバ名から予測不可能な値を返す場合, 不明瞭かつ潜在的に悪用可能な状況が起こりうる.
	
</p>
<p>
      一部のJSONパーサーは有効な入力の後に意味のある文字が余分に含まれている入力を拒否しないかもしれない.
      例えば, <tt>{"tag":"value"}ABCD</tt>という入力は有効なJSONオブジェクトの後に余分な文字である<tt>ABCD</tt>を含んでいる.
      このような入力は全体が拒否されないければならない(MUST).
	
</p>
<a name="UnicodeSecCon"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
Unicode Comparison Security Considerations</h3>

<p>
          ヘッダパラメータ名とアルゴリズム名はUnicode文字列である.
          セキュリティ上の理由から, これらの名前の表現は任意のエスケープ処理(<a class='info' href='#RFC4627'>RFC 4627<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4627]のSection 2.5に従う)を行った後, そのまま比較されなければならない.
          つまり, 例えばJSON文字列("sig", "\u0073ig")は等しいものとして比較されなければならない一方, ("SIG", "Sig", "si\u0047")は前述のセットと, またお互いにも等しくないものとして比較されなければならない.
	
</p>
<p>
      JSON文字列はUnicodeの基本多言語面外の文字を含むことが出来る.
      例えば, ト音記号 (U+1D11E)はJSON文字列中に"\uD834\uDD1E"として表すことが出来る.
      理想的には, JWSの実装は基本多言語面外の文字が正確に保存され比較されることを保証するべき(SHOULD)である.
      しかし一方で, これらの文字のせいで基礎となるJSONの実装に存在する制限を実行出来ない場合は, これらの文字を含む入力は拒否されなければならない(MUST).
	
</p>
<a name="TLS_requirements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
TLS Requirements</h3>

<p>
      実装はTLSをサポートしなければならない(MUST).
      実装されるべきバージョンは導入の普及状況や, 実装時点で既知のセキュリティの脆弱性に依存し, 時間とともに変化する.
      TLS version 1.0 <a class='info' href='#RFC2246'>[RFC2246]<span> (</span><span class='info'>Dierks, T. and C. Allen, &ldquo;The TLS Protocol Version 1.0,&rdquo; January&nbsp;1999.</span><span>)</span></a>はもっとも広く導入されているバージョンであり, 広範な相互運用性を提供する.
	
</p>
<p>
      情報取得や改ざんから保護するために, 機密保護にはTLSを使用して機密性と完全性保護を提供するciphersuiteが適用されなければならない(MUST).
	
</p>
<p>
      TLSが使用されるときは常に<a class='info' href='#RFC6125'>RFC 6125<span> (</span><span class='info'>Saint-Andre, P. and J. Hodges, &ldquo;Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS),&rdquo; March&nbsp;2011.</span><span>)</span></a> [RFC6125]に従いTLSサーバー証明書のチェックが実行されなければならない(MUST).
	
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ECMAScript">[ECMAScript]</a></td>
<td class="author-text">Ecma International, &ldquo;ECMAScript Language Specification, 5.1 Edition,&rdquo; ECMA&nbsp;262, June&nbsp;2011 (<a href="http://www.ecma-international.org/ecma-262/5.1/">HTML</a>, <a href="http://www.ecma-international.org/ecma-262/5.1/ECMA-262.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU.X690.1994">[ITU.X690.1994]</a></td>
<td class="author-text">International Telecommunications Union, &ldquo;Information Technology - ASN.1 encoding rules: Specification of Basic Encoding Rules (BER), Canonical Encoding Rules (CER) and Distinguished Encoding Rules (DER),&rdquo; ITU-T&nbsp;Recommendation X.690, 1994.</td></tr>
<tr><td class="author-text" valign="top"><a name="JWA">[JWA]</a></td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">Jones, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms">JSON Web Algorithms (JWA)</a>,&rdquo; draft-ietf-jose-json-web-algorithms (work in progress), July&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="JWK">[JWK]</a></td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">Jones, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-key">JSON Web Key (JWK)</a>,&rdquo; draft-ietf-jose-json-web-key (work in progress), July&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-key">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1421">[RFC1421]</a></td>
<td class="author-text"><a href="mailto:104-8456@mcimail.com">Linn, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1421">Privacy Enhancement for Internet Electronic Mail: Part I: Message Encryption and Authentication Procedures</a>,&rdquo; RFC&nbsp;1421, February&nbsp;1993 (<a href="http://www.rfc-editor.org/rfc/rfc1421.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2246">[RFC2246]</a></td>
<td class="author-text"><a href="mailto:tdierks@certicom.com">Dierks, T.</a> and <a href="mailto:callen@certicom.com">C. Allen</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2246">The TLS Protocol Version 1.0</a>,&rdquo; RFC&nbsp;2246, January&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2818">[RFC2818]</a></td>
<td class="author-text">Rescorla, E., &ldquo;<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>,&rdquo; RFC&nbsp;2818, May&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2818.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4288">[RFC4288]</a></td>
<td class="author-text">Freed, N. and J. Klensin, &ldquo;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>,&rdquo; RFC&nbsp;4288, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4288.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4627">[RFC4627]</a></td>
<td class="author-text">Crockford, D., &ldquo;<a href="http://tools.ietf.org/html/rfc4627">The application/json Media Type for JavaScript Object Notation (JSON)</a>,&rdquo; RFC&nbsp;4627, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4627.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4648">[RFC4648]</a></td>
<td class="author-text">Josefsson, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>,&rdquo; RFC&nbsp;4648, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4648.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5246">[RFC5246]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>,&rdquo; RFC&nbsp;5246, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5280">[RFC5280]</a></td>
<td class="author-text">Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;<a href="http://tools.ietf.org/html/rfc5280">Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>,&rdquo; RFC&nbsp;5280, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5280.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6125">[RFC6125]</a></td>
<td class="author-text">Saint-Andre, P. and J. Hodges, &ldquo;<a href="http://tools.ietf.org/html/rfc6125">Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)</a>,&rdquo; RFC&nbsp;6125, March&nbsp;2011 (<a href="http://www.rfc-editor.org/rfc/rfc6125.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="USA15">[USA15]</a></td>
<td class="author-text"><a href="mailto:markdavis@google.com">Davis, M.</a>, <a href="mailto:ken@unicode.org">Whistler, K.</a>, and M. Deurst, &ldquo;Unicode Normalization Forms,&rdquo; Unicode Standard Annex&nbsp;15, 09&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="USASCII">[USASCII]</a></td>
<td class="author-text">American National Standards Institute, &ldquo;Coded Character Set -- 7-bit American Standard Code for Information Interchange,&rdquo; ANSI&nbsp;X3.4, 1986.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.WD-xmldsig-bestpractices-20110809">[W3C.WD-xmldsig-bestpractices-20110809]</a></td>
<td class="author-text">Datta, P. and F. Hirsch, &ldquo;<a href="http://www.w3.org/TR/2011/WD-xmldsig-bestpractices-20110809">XML Signature Best Practices</a>,&rdquo; World Wide Web Consortium WD&nbsp;WD-xmldsig-bestpractices-20110809, August&nbsp;2011 (<a href="http://www.w3.org/TR/2011/WD-xmldsig-bestpractices-20110809">HTML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="CanvasApp">[CanvasApp]</a></td>
<td class="author-text">Facebook, &ldquo;<a href="http://developers.facebook.com/docs/authentication/canvas">Canvas Applications</a>,&rdquo; 2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="JSS">[JSS]</a></td>
<td class="author-text">Bradley, J. and N. Sakimura (editor), &ldquo;<a href="http://jsonenc.info/jss/1.0/">JSON Simple Sign</a>,&rdquo; September&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="JWE">[JWE]</a></td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">Jones, M.</a>, <a href="mailto:ekr@rtfm.com">Rescorla, E.</a>, and <a href="mailto:jhildebr@cisco.com">J. Hildebrand</a>, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-encryption">JSON Web Encryption (JWE)</a>,&rdquo; draft-ietf-jose-json-web-encryption (work in progress), July&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-encryption">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="JWT">[JWT]</a></td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">Jones, M.</a>, <a href="mailto:ve7jtb@ve7jtb.com">Bradley, J.</a>, and <a href="mailto:n-sakimura@nri.co.jp">N. Sakimura</a>, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token">JSON Web Token (JWT)</a>,&rdquo; draft-ietf-oauth-json-web-token (work in progress), July&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="MagicSignatures">[MagicSignatures]</a></td>
<td class="author-text">Panzer (editor), J., Laurie, B., and D. Balfanz, &ldquo;<a href="http://salmon-protocol.googlecode.com/svn/trunk/draft-panzer-magicsig-01.html">Magic Signatures</a>,&rdquo; January&nbsp;2011.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4122">[RFC4122]</a></td>
<td class="author-text"><a href="mailto:paulle@microsoft.com">Leach, P.</a>, <a href="mailto:michael@refactored-networks.com">Mealling, M.</a>, and <a href="mailto:rsalz@datapower.com">R. Salz</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4122">A Universally Unique IDentifier (UUID) URN Namespace</a>,&rdquo; RFC&nbsp;4122, July&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4122.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4122.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4122.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.CR-xmldsig-core2-20120124">[W3C.CR-xmldsig-core2-20120124]</a></td>
<td class="author-text">Eastlake, D., Reagle, J., Yiu, K., Solo, D., Datta, P., Hirsch, F., Cantor, S., and T. Roessler, &ldquo;<a href="http://www.w3.org/TR/2012/CR-xmldsig-core2-20120124">XML Signature Syntax and Processing Version 2.0</a>,&rdquo; World Wide Web Consortium CR&nbsp;CR-xmldsig-core2-20120124, January&nbsp;2012 (<a href="http://www.w3.org/TR/2012/CR-xmldsig-core2-20120124">HTML</a>).</td></tr>
</table>

<a name="rfc.references3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.3.&nbsp;翻訳プロジェクト</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="oidfj">[oidfj]</a></td>
<td class="author-text">OpenIDファウンデーションジャパン, &ldquo;<a href="http://www.openid.or.jp/">OpenIDファウンデーションジャパン</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="oidfj-github">[oidfj-github]</a></td>
<td class="author-text">OpenIDファウンデーションジャパン, &ldquo;<a href="https://github.com/openid-foundation-japan">Githubレポジトリー</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="oidfj-trans">[oidfj-trans]</a></td>
<td class="author-text">OpenIDファウンデーションジャパン, &ldquo;<a href="http://openid-foundation-japan.github.com/">翻訳・教育ワーキンググループ</a>.&rdquo;</td></tr>
</table>

<a name="JWSExamples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
JWS Examples</h3>

<p>
      本節では, いくつかのJWSの例を提供する.
      はじめの3例はJSON Web Token (JWT) <a class='info' href='#JWT'>[JWT]<span> (</span><span class='info'>Jones, M., Bradley, J., and N. Sakimura, &ldquo;JSON Web Token (JWT),&rdquo; July&nbsp;2013.</span><span>)</span></a> を表しているが, <a class='info' href='#ES512Example'>Appendix&nbsp;A.4<span> (</span><span class='info'>Example JWS using ECDSA P-521 SHA-512</span><span>)</span></a> に見られるように, ペイロードは任意のオクテット列を含むことが出来る.
      
</p>
<a name="HS256Example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Example JWS using HMAC SHA-256</h3>

<a name="HS256Encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.1"></a><h3>A.1.1.&nbsp;
Encoding</h3>

<p>
      以下に示すJWSヘッダの例では, データ構造がJSON Web Token (JWT) <a class='info' href='#JWT'>[JWT]<span> (</span><span class='info'>Jones, M., Bradley, J., and N. Sakimura, &ldquo;JSON Web Token (JWT),&rdquo; July&nbsp;2013.</span><span>)</span></a> であり, JWS署名入力はHMAC SHA-256アルゴリズムにより保護されていることを示している.
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"typ":"JWT",
   "alg":"HS256"}
</pre></div>
<p>
      以下に示すオクテット列は, JWSヘッダのUTF-8表現を含む:
	  
</p>
<p>

[123, 34, 116, 121, 112, 34, 58, 34, 74, 87, 84, 34, 44, 13, 10, 32, 34, 97, 108, 103, 34, 58, 34, 72, 83, 50, 53, 54, 34, 125]

	  
</p>
<p>
      これらのオクテット列をBase64 URLエンコードすることで, エンコード済JWSヘッダの値が生成される:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
</pre></div>
<p>
      この例で使用されるJWSペイロードは以下のJSONオブジェクトでUTF-8で表現したオクテット列である.
      (このペイロードはBase64 URL エンコードされたJSONオブジェクトである必要はなく, 任意のBase64URLエンコードされたオクテット列でもよいことに注意)
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"iss":"joe",
   "exp":1300819380,
   "http://example.com/is_root":true}
</pre></div>
<p>
      以下に示すオクテット列は上記のJSONオブジェクトのUTF-8表現であり, これがJWSペイロードである:
	  
</p>
<p>

[123, 34, 105, 115, 115, 34, 58, 34, 106, 111, 101, 34, 44, 13, 10, 32, 34, 101, 120, 112, 34, 58, 49, 51, 48, 48, 56, 49, 57, 51, 56, 48, 44, 13, 10, 32, 34, 104, 116, 116, 112, 58, 47, 47, 101, 120, 97, 109, 112, 108, 101, 46, 99, 111, 109, 47, 105, 115, 95, 114, 111, 111, 116, 34, 58, 116, 114, 117, 101, 125]

	  
</p>
<p>
      JWSペイロードをBase64 URLエンコードすることで, エンコード済JWSペイロードの値が生成される
      (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
</pre></div>
<p>
      エンコード済JWSヘッダとエンコード済JWSペイロードをピリオド('.')文字で連結することで, JWS 署名入力値が生成される
      (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
</pre></div>
<p>
      JWS署名入力のASCII表現が以下に示すオクテット列となる:
	  
</p>
<p>

[101, 121, 74, 48, 101, 88, 65, 105, 79, 105, 74, 75, 86, 49, 81, 105, 76, 65, 48, 75, 73, 67, 74, 104, 98, 71, 99, 105, 79, 105, 74, 73, 85, 122, 73, 49, 78, 105, 74, 57, 46, 101, 121, 74, 112, 99, 51, 77, 105, 79, 105, 74, 113, 98, 50, 85, 105, 76, 65, 48, 75, 73, 67, 74, 108, 101, 72, 65, 105, 79, 106, 69, 122, 77, 68, 65, 52, 77, 84, 107, 122, 79, 68, 65, 115, 68, 81, 111, 103, 73, 109, 104, 48, 100, 72, 65, 54, 76, 121, 57, 108, 101, 71, 70, 116, 99, 71, 120, 108, 76, 109, 78, 118, 98, 83, 57, 112, 99, 49, 57, 121, 98, 50, 57, 48, 73, 106, 112, 48, 99, 110, 86, 108, 102, 81]

	  
</p>
<p>
      HMACは鍵を用いて生成される.
      この例では次のようなJSON Web Key <a class='info' href='#JWK'>[JWK]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Key (JWK),&rdquo; July&nbsp;2013.</span><span>)</span></a> フォーマットで表現される対象鍵を用いる
      (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"kty":"oct",
   "k":"AyM1SysPpbyDfgZld3umj1qzKObwVMkoqQ-EstJQLr_T-1qS0gZH75
        aKtMN3Yj0iPS4hcgUuTwjAzZr1Z9CAow"
  }
</pre></div>
<p>
      JWS署名入力のASCII表現であるオクテット列にこの鍵を用いてHMAC SHA-256アルゴリズムを実行することで, オクテット列が生成される.
	  
</p>
<p>

[116, 24, 223, 180, 151, 153, 224, 37, 79, 250, 96, 125, 216, 173, 187, 186, 22, 212, 37, 77, 105, 214, 191, 240, 91, 88, 5, 88, 83, 132, 141, 121]

	  
</p>
<p>
      上記のオクテット列をBase64 URLエンコードすることで, エンコード済JWS署名の値が生成される.
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk
</pre></div>
<p>
    ピリオド('.')文字をパーツ間の区切りとしてこれらの値をヘッダ.ペイロード.署名の順番で連結することで, JSON Compact Serialiation形式の完全なJWS表現が生成される.
    (改行は掲載上の都合による):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
  .
  dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk
</pre></div>
<a name="HS256Decoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.2"></a><h3>A.1.2.&nbsp;
Decoding</h3>

<p>
      JWSのデコードは, JWSヘッダ, JWSペイロード, JWS署名のオクテット列を生成するためにエンコード済JWSヘッダ, エンコード済JWSペイロード, エンコード済JWS署名のBase64 URLデコードを必要とする.
      JWSヘッダのUTF-8表現を含むオクテット列がJWSヘッダ文字列にデコードされる.
	  
</p>
<a name="HS256Validating"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.3"></a><h3>A.1.3.&nbsp;
Validating</h3>

<p>
      次にデコード結果を検証する.
	  ヘッダ中の <tt>alg</tt> パラメータが"HS256"であるため, JWS署名に含まれるHMAC SHA-256の値を検証する.
      検証に失敗した場合, このJWSは拒否されなければならない (MUST).
	  
</p>
<p>
      初めに, JWSヘッダ文字列が正しいJSONであることを検証する.
	  
</p>
<p>
          HMAC値を検証するために, 正しい鍵を用いてJWS署名入力のASCII表現をHMAC SHA-256アルゴリズムの入力として上記のプロセスを繰りかえし, 出力されたものがJWS署名と一致するかが決定される.
          もしそれが正確に一致していた場合, HMACの検証は完了する.
	  
</p>
<a name="RS256Example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Example JWS using RSASSA-PKCS-v1_5 SHA-256</h3>

<a name="RS256Encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2.1"></a><h3>A.2.1.&nbsp;
Encoding</h3>

<p>
        この例のJWSヘッダは2つの点で前述の例と異なっている:
        まず, 異なるアルゴリズムが使われているため, <tt>alg</tt>の値が異なっている.
        次に, 例示の都合により, 任意の"typ"パラメータは使用されていない(この違いは用いられるアルゴリズムに関連するものではない).
        使用されるJWSヘッダは以下の通り:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"RS256"}
</pre></div>
<p>
        以下のオクテット列はJWSヘッダのUTF-8表現である:
	  
</p>
<p>

[123, 34, 97, 108, 103, 34, 58, 34, 82, 83, 50, 53, 54, 34, 125]

	  
</p>
<p>
        これらのオクテット列をBase64urlエンコードすることで, エンコード済JWS署名の値が生成される:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJSUzI1NiJ9
</pre></div>
<p>
        以下の, この例で使用されるJWSペイロードは前述の例と同じである.
        エンコード済JWSペイロードは同じになるので, 計算はここで繰り返し行わない.
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"iss":"joe",
   "exp":1300819380,
   "http://example.com/is_root":true}
</pre></div>
<p>
        エンコード済JWSヘッダとエンコード済JWSペイロードをピリオド('.')文字で連結することで, JWS署名入力値が生成される
        (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJSUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
</pre></div>
<p>
        JWS署名入力のASCII表現が以下のオクテット列となる:
	  
</p>
<p>

[101, 121, 74, 104, 98, 71, 99, 105, 79, 105, 74, 83, 85, 122, 73, 49, 78, 105, 74, 57, 46, 101, 121, 74, 112, 99, 51, 77, 105, 79, 105, 74, 113, 98, 50, 85, 105, 76, 65, 48, 75, 73, 67, 74, 108, 101, 72, 65, 105, 79, 106, 69, 122, 77, 68, 65, 52, 77, 84, 107, 122, 79, 68, 65, 115, 68, 81, 111, 103, 73, 109, 104, 48, 100, 72, 65, 54, 76, 121, 57, 108, 101, 71, 70, 116, 99, 71, 120, 108, 76, 109, 78, 118, 98, 83, 57, 112, 99, 49, 57, 121, 98, 50, 57, 48, 73, 106, 112, 48, 99, 110, 86, 108, 102, 81]

	  
</p>
<p>
        この例では次のようなJSON Web Key <a class='info' href='#JWK'>[JWK]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Key (JWK),&rdquo; July&nbsp;2013.</span><span>)</span></a> フォーマットで表現されるRSA鍵を用いる
        (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"kty":"RSA",
   "n":"ofgWCuLjybRlzo0tZWJjNiuSfb4p4fAkd_wWJcyQoTbji9k0l8W26mPddx
        HmfHQp-Vaw-4qPCJrcS2mJPMEzP1Pt0Bm4d4QlL-yRT-SFd2lZS-pCgNMs
        D1W_YpRPEwOWvG6b32690r2jZ47soMZo9wGzjb_7OMg0LOL-bSf63kpaSH
        SXndS5z5rexMdbBYUsLA9e-KXBdQOS-UTo7WTBEMa2R2CapHg665xsmtdV
        MTBQY4uDZlxvb3qCo5ZwKh9kG4LT6_I5IhlJH7aGhyxXFvUK-DWNmoudF8
        NAco9_h9iaGNj8q2ethFkMLs91kzk2PAcDTW9gb54h4FRWyuXpoQ",
   "e":"AQAB",
   "d":"Eq5xpGnNCivDflJsRQBXHx1hdR1k6Ulwe2JZD50LpXyWPEAeP88vLNO97I
        jlA7_GQ5sLKMgvfTeXZx9SE-7YwVol2NXOoAJe46sui395IW_GO-pWJ1O0
        BkTGoVEn2bKVRUCgu-GjBVaYLU6f3l9kJfFNS3E0QbVdxzubSu3Mkqzjkn
        439X0M_V51gfpRLI9JYanrC4D4qAdGcopV_0ZHHzQlBjudU2QvXt4ehNYT
        CBr6XCLQUShb1juUO1ZdiYoFaFQT5Tw8bGUl_x_jTj3ccPDVZFD9pIuhLh
        BOneufuBiB4cS98l2SR_RQyGWSeWjnczT0QU91p1DhOVRuOopznQ"
  }
</pre></div>
<p>
        RSAの秘密鍵, ハッシュタイプ SHA-256, およびJWS署名入力のASCII表現であるオクテット列が入力としてRSAの署名関数に渡される.
        デジタル署名の結果はビッグエンディアン整数として表現されるオクテット列である.
        以下がこの例である:
	  
</p>
<p>
[112, 46, 33, 137, 67, 232, 143, 209, 30, 181, 216, 45, 191, 120, 69, 243, 65, 6, 174, 27, 129, 255, 247, 115, 17, 22, 173, 209, 113, 125, 131, 101, 109, 66, 10, 253, 60, 150, 238, 221, 115, 162, 102, 62, 81, 102, 104, 123, 0, 11, 135, 34, 110, 1, 135, 237, 16, 115, 249, 69, 229, 130, 173, 252, 239, 22, 216, 90, 121, 142, 232, 198, 109, 219, 61, 184, 151, 91, 23, 208, 148, 2, 190, 237, 213, 217, 217, 112, 7, 16, 141, 178, 129, 96, 213, 248, 4, 12, 167, 68, 87, 98, 184, 31, 190, 127, 249, 217, 46, 10, 231, 111, 36, 242, 91, 51, 187, 230, 244, 74, 230, 30, 177, 4, 10, 203, 32, 4, 77, 62, 249, 18, 142, 212, 1, 48, 121, 91, 212, 189, 59, 65, 238, 202, 208, 102, 171, 101, 25, 129, 253, 228, 141, 247, 127, 55, 45, 195, 139, 159, 175, 221, 59, 239, 177, 139, 93, 163, 204, 60, 46, 176, 47, 158, 58, 65, 214, 18, 202, 173, 21, 145, 18, 115, 160, 95, 35, 185, 232, 56, 250, 175, 132, 157, 105, 132, 41, 239, 90, 30, 136, 121, 130, 54, 195, 212, 14, 96, 69, 34, 165, 68, 200, 242, 122, 122, 45, 184, 6, 99, 209, 108, 247, 202, 234, 86, 222, 64, 92, 178, 33, 90, 69, 178, 194, 85, 102, 181, 90, 193, 167, 72, 160, 112, 223, 200, 163, 42, 70, 149, 67, 208, 25, 238, 251, 71]
	  
</p>
<p>
        デジタル署名をbase64urlでエンコードすることで以下のエンコード済JWS署名が生成される.
        (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  cC4hiUPoj9Eetdgtv3hF80EGrhuB__dzERat0XF9g2VtQgr9PJbu3XOiZj5RZmh7
  AAuHIm4Bh-0Qc_lF5YKt_O8W2Fp5jujGbds9uJdbF9CUAr7t1dnZcAcQjbKBYNX4
  BAynRFdiuB--f_nZLgrnbyTyWzO75vRK5h6xBArLIARNPvkSjtQBMHlb1L07Qe7K
  0GarZRmB_eSN9383LcOLn6_dO--xi12jzDwusC-eOkHWEsqtFZESc6BfI7noOPqv
  hJ1phCnvWh6IeYI2w9QOYEUipUTI8np6LbgGY9Fs98rqVt5AXLIhWkWywlVmtVrB
  p0igcN_IoypGlUPQGe77Rw
</pre></div>
<p>
      これらの値をヘッダ.ペイロード.署名の順番で, パーツの間をピリオド('.')で連結することでJWS Compact Serializationを用いた完全なJWS表現が生成される.
    (改行は掲載上の都合による):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJSUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
  .
  cC4hiUPoj9Eetdgtv3hF80EGrhuB__dzERat0XF9g2VtQgr9PJbu3XOiZj5RZmh7
  AAuHIm4Bh-0Qc_lF5YKt_O8W2Fp5jujGbds9uJdbF9CUAr7t1dnZcAcQjbKBYNX4
  BAynRFdiuB--f_nZLgrnbyTyWzO75vRK5h6xBArLIARNPvkSjtQBMHlb1L07Qe7K
  0GarZRmB_eSN9383LcOLn6_dO--xi12jzDwusC-eOkHWEsqtFZESc6BfI7noOPqv
  hJ1phCnvWh6IeYI2w9QOYEUipUTI8np6LbgGY9Fs98rqVt5AXLIhWkWywlVmtVrB
  p0igcN_IoypGlUPQGe77Rw
</pre></div>
<a name="RS256Decoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2.2"></a><h3>A.2.2.&nbsp;
Decoding</h3>

<p>
        JWSのデコードはJWSヘッダ, JWSペイロード, およびJWS署名のオクテット列を生成するために, エンコード済JWSヘッダ, エンコード済JWSペイロード, エンコード済JWS署名をBase64urlデコードする必要がある.
        JWSヘッダのUTF-8表現を含むオクテット列はJWSヘッダ文字列にデコードされる.
	  
</p>
<a name="RS256Validating"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2.3"></a><h3>A.2.3.&nbsp;
Validating</h3>

<p>
        ヘッダ中の<tt>alg</tt>パラメータが"RS256"であるため, JWS署名に含まれるRSASSA-PKCS-v1_5 SHA-256のデジタル署名を検証する.
        いずれかの検証ステップに失敗した場合, JWSは拒否されなければならない.
	  
</p>
<p>
        まず, JWSヘッダ文字列が正しいJSONであるか検証する.
	  
</p>
<p>
        JWS署名の検証は直前の例と少し異なる.
        まず, デジタル署名 Sを生成してチェックするためにエンコード済JWS署名をbase64urlデコードする.
        (n, e), S, 及びJWS署名入力のASCII表現であるオクテット列をSHA-256ハッシュ関数を使うよう設定されたRSASSA-PKCS-v1_5 署名検証器に渡す.
	  
</p>
<a name="ES256Example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>A.3.&nbsp;
Example JWS using ECDSA P-256 SHA-256</h3>

<a name="ES256Encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.1"></a><h3>A.3.1.&nbsp;
Encoding</h3>

<p>
      異なるアルゴリズムが利用されているため, この例のJWSヘッダは前の例と異なる.
      利用されるJWSヘッダ:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"ES256"}
</pre></div>
<p>
      以下に示すオクテット列はJWSヘッダのUTF-8表現である:
	  
</p>
<p>

[123, 34, 97, 108, 103, 34, 58, 34, 69, 83, 50, 53, 54, 34, 125]

	  
</p>
<p>
      これらのオクテット列をBase64 URLエンコードするとこのようなエンコード済JWSヘッダの値が生成される.
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzI1NiJ9
</pre></div>
<p>
      以下に示す, この例で用いられるJWSペイロードは前の例のものと同一である.
      したがって, エンコード済JWSペイロードもまた同一であるため, ここではその計算を繰りかえさない.
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"iss":"joe",
   "exp":1300819380,
   "http://example.com/is_root":true}
</pre></div>
<p>
      エンコード済JWSヘッダとエンコード済JWSペイロードをピリオド('.')文字で連結することで, JWS 署名入力値が生成される
      (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
</pre></div>
<p>
      JWS署名入力のASCII表現が以下に示すオクテット列となる:
	  
</p>
<p>

[101, 121, 74, 104, 98, 71, 99, 105, 79, 105, 74, 70, 85, 122, 73, 49, 78, 105, 74, 57, 46, 101, 121, 74, 112, 99, 51, 77, 105, 79, 105, 74, 113, 98, 50, 85, 105, 76, 65, 48, 75, 73, 67, 74, 108, 101, 72, 65, 105, 79, 106, 69, 122, 77, 68, 65, 52, 77, 84, 107, 122, 79, 68, 65, 115, 68, 81, 111, 103, 73, 109, 104, 48, 100, 72, 65, 54, 76, 121, 57, 108, 101, 71, 70, 116, 99, 71, 120, 108, 76, 109, 78, 118, 98, 83, 57, 112, 99, 49, 57, 121, 98, 50, 57, 48, 73, 106, 112, 48, 99, 110, 86, 108, 102, 81]

	  
</p>
<p>
      この例は以下のJSON Web Key <a class='info' href='#JWK'>[JWK]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Key (JWK),&rdquo; July&nbsp;2013.</span><span>)</span></a> フォーマットで表現された楕円曲線鍵を用いる:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"kty":"EC",
   "crv":"P-256",
   "x":"f83OJ3D2xF1Bg8vub9tLe1gHMzV76e8Tus9uPHvRVEU",
   "y":"x_FEzRu9m36HLN_tue659LNpXW6pCyStikYjKIWI5a0",
   "d":"jpsQnnGQmL-YBIffH1136cspYG6-0iY7X1fCE9-E9LI"
  }
</pre></div>
<p>
      ECDSA秘密部 d, 曲線タイプ P-521, ハッシュタイプ SHA-512, およびJWS署名入力のASCII表現のオクテット列が, 入力としてECDSA署名関数に渡される.
      デジタル署名結果はEC点 (R, S)であり, ここで R および S は符号なし整数である.
      この例では, R と S の値をビッグエンディアン整数として表現するオクテット列となる:
	  
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">結果名</th><th align="left">値</th></tr>
<tr>
<td align="left">R</td>
<td align="left">

[14, 209, 33, 83, 121, 99, 108, 72, 60, 47, 127, 21, 88, 7, 212, 2, 163, 178, 40, 3, 58, 249, 124, 126, 23, 129, 154, 195, 22, 158, 166, 101]

	    </td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">

[197, 10, 7, 211, 140, 60, 112, 229, 216, 241, 45, 175, 8, 74, 84, 128, 166, 101, 144, 197, 242, 147, 80, 154, 143, 63, 127, 138, 131, 163, 84, 213]

	    </td>
</tr>
</table>
<br clear="all" />

<p>
      S配列をR配列の末尾に連結し, Base64 URLエンコーディングを施すことで, 以下のエンコード済JWS署名が生成される
      (改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  DtEhU3ljbEg8L38VWAfUAqOyKAM6-Xx-F4GawxaepmXFCgfTjDxw5djxLa8ISlSA
  pmWQxfKTUJqPP3-Kg6NU1Q
</pre></div>
<p>
    ピリオド('.')文字をパーツ間の区切りとしてこれらの値をヘッダ.ペイロード.署名の順番で連結することで, JSON Compact Serialiation形式の完全なJWS表現が生成される.
    (改行は掲載上の都合による):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzI1NiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
  .
  DtEhU3ljbEg8L38VWAfUAqOyKAM6-Xx-F4GawxaepmXFCgfTjDxw5djxLa8ISlSA
  pmWQxfKTUJqPP3-Kg6NU1Q
</pre></div>
<a name="ES256Decoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.2"></a><h3>A.3.2.&nbsp;
Decoding</h3>

<p>
      JWSのデコードはJWSヘッダ, JWSペイロード, およびJWS署名のオクテット列を生成するために, エンコード済JWSヘッダ, エンコード済JWSペイロード, エンコード済JWS署名をBase64urlデコードする必要がある.
      JWSヘッダのUTF-8表現を含むオクテット列はJWSヘッダ文字列にデコードされる.
	  
</p>
<a name="ES256Validating"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3.3"></a><h3>A.3.3.&nbsp;
Validating</h3>

<p>
	  ヘッダ中の <tt>alg</tt> パラメータが"ES256"であるため, JWS署名に含まれるECDSA P-256 SHA-256デジタル署名を検証する.
      もし検証に失敗した場合, このJWSは拒否されなければならない (MUST).
	  
</p>
<p>
        まず, JWSヘッダ文字列が正しいJSONであるか検証する.
	  
</p>
<p>
            JWS署名の検証は最初の例と少し異なる.
      初めにエンコード済JWS署名を前の例のようにBase64 URLデコード, それから長さ64のオクテット列を長さ32の2つのオクテット列に分割し, はじめがR, 次がSとなる.
      そして, (x, y), (R, S)およびJWS署名入力のASCII表現であるオクテットを, P-256 曲線とSHA-256ハッシュ関数が設定されたECDSA署名検証器に入力として与える.
	  
</p>
<p>
      JSON Web Algorithms (JWA) <a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a> 仕様の3.4節で説明されているように, ECDSAのKの値の利用は, HMACの妥当性確認と同じ方法でデジタル署名の妥当性を検証することができないことを意味する.
      その代わり, 実装はデジタル署名を検証するためにECDSA検証機を利用しなければならない (MUST).
	  
</p>
<a name="ES512Example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4"></a><h3>A.4.&nbsp;
Example JWS using ECDSA P-521 SHA-512</h3>

<a name="ES512Encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4.1"></a><h3>A.4.1.&nbsp;
Encoding</h3>

<p>
            この例のJWSヘッダは直前の例と異なり, ECDSA曲線とハッシュ関数を使っている. 使用されるJWSヘッダは以下の通り:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"ES512"}
</pre></div>
<p>
            以下のオクテット列はJWSヘッダのUTF-8表現である:
	  
</p>
<p>
[123, 34, 97, 108, 103, 34, 58, 34, 69, 83, 53, 49, 50, 34, 125]
	  
</p>
<p>
            これらのオクテットをbase64urlエンコードすると, 以下のエンコード済JWSヘッダ値を得る:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzUxMiJ9
</pre></div>
<p>
            この例のJWSペイロードは, ASCII文字列の "Payload" である. この文字列の表現は以下のオクテット列である:
	  
</p>
<p>
[80, 97, 121, 108, 111, 97, 100]
	  
</p>
<p>
            これらのオクテットをbase64urlエンコードすると, 以下のエンコード済JWSペイロード値を得る:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  UGF5bG9hZA
</pre></div>
<p>
            エンコード済JWSヘッダ, ピリオド文字('.'), エンコード済JWSペイロードを連結することにより, 以下のJWS署名入力値を得る:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzUxMiJ9.UGF5bG9hZA
</pre></div>
<p>
            このJWS署名入力値のASCII表現は以下のオクテット列である:
	  
</p>
<p>
[101, 121, 74, 104, 98, 71, 99, 105, 79, 105, 74, 70, 85, 122, 85, 120, 77, 105, 74, 57, 46, 85, 71, 70, 53, 98, 71, 57, 104, 90, 65]
	  
</p>
<p>
            この例では, 以下のJSON Web Key <a class='info' href='#JWK'>[JWK]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Key (JWK),&rdquo; July&nbsp;2013.</span><span>)</span></a>フォーマットで表現された楕円曲線を使う(改行は掲載上の都合による):
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"kty":"EC",
   "crv":"P-521",
   "x":"AekpBQ8ST8a8VcfVOTNl353vSrDCLLJXmPk06wTjxrrjcBpXp5EOnYG_
        NjFZ6OvLFV1jSfS9tsz4qUxcWceqwQGk",
   "y":"ADSmRA43Z1DSNx_RvcLI87cdL07l6jQyyBXMoxVg_l2Th-x3S1WDhjDl
        y79ajL4Kkd0AZMaZmh9ubmf63e3kyMj2",
   "d":"AY5pb7A0UFiB3RELSD64fTLOSV_jazdF7fLYyuTw8lOfRhWg6Y6rUrPA
        xerEzgdRhajnu0ferB0d53vM9mE15j2C"
  }
</pre></div>
<p>
            ECDSA秘密部 d , 曲線タイプ P-521, ハッシュタイプ SHA-512, およびJWS署名入力のASCII表現オクテット列が, 入力としてECDSA署名関数に渡される. デジタル署名結果はEC点 (R, S)であり, ここで R および S は符号なし整数である. この例では, R と S の値をビッグエンディアン整数として表現するオクテット列となる:
	  
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">結果名</th><th align="left">値</th></tr>
<tr>
<td align="left">R</td>
<td align="left">
[1, 220, 12, 129, 231, 171, 194, 209, 232, 135, 233, 117, 247, 105, 122, 210,
 26, 125, 192, 1, 217, 21, 82, 91, 45, 240, 255, 83, 19, 34, 239, 71,
 48, 157, 147, 152, 105, 18, 53, 108, 163, 214, 68, 231, 62, 153, 150, 106,
 194, 164, 246, 72, 143, 138, 24, 50, 129, 223, 133, 206, 209, 172, 63, 237,
 119, 109]
	    </td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">
[0, 111, 6, 105, 44, 5, 41, 208, 128, 61, 152, 40, 92, 61,
 152, 4, 150, 66, 60, 69, 247, 196, 170, 81, 193, 199, 78, 59, 194, 169,
 16, 124, 9, 143, 42, 142, 131, 48, 206, 238, 34, 175, 83, 203, 220, 159,
 3, 107, 155, 22, 27, 73, 111, 68, 68, 21, 238, 144, 229, 232, 148, 188,
 222, 59, 242, 103]
	    </td>
</tr>
</table>
<br clear="all" />

<p>
            S配列をR配列の末尾に連結し base64urlエンコーディングを施すとと以下のエンコード済JWS署名を得る(改行は掲載上の都合による):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  AdwMgeerwtHoh-l192l60hp9wAHZFVJbLfD_UxMi70cwnZOYaRI1bKPWROc-mZZq
  wqT2SI-KGDKB34XO0aw_7XdtAG8GaSwFKdCAPZgoXD2YBJZCPEX3xKpRwcdOO8Kp
  EHwJjyqOgzDO7iKvU8vcnwNrmxYbSW9ERBXukOXolLzeO_Jn
</pre></div>
<p>
	  これらの値を ヘッダ, ペイロード, 署名 の順でピリオド文字 ('.') を区切りとして連結することで, 以下のJWS Compact Serialization形式を用いた完全なJWS表現を得る(改行は掲載上の都合による):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzUxMiJ9
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
  .
  AdwMgeerwtHoh-l192l60hp9wAHZFVJbLfD_UxMi70cwnZOYaRI1bKPWROc-mZZq
  wqT2SI-KGDKB34XO0aw_7XdtAG8GaSwFKdCAPZgoXD2YBJZCPEX3xKpRwcdOO8Kp
  EHwJjyqOgzDO7iKvU8vcnwNrmxYbSW9ERBXukOXolLzeO_Jn
</pre></div>
<a name="ES512Decoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4.2"></a><h3>A.4.2.&nbsp;
Decoding</h3>

<p>
            JWSのデコードは, エンコード済JWSヘッダ, エンコード済JWSペイロード, エンコード済JWS署名をbase64urlデコードし, JWSヘッダ, JWSペイロード, およびJWS署名のオクテット列を得る必要がある. JWSヘッダのUTF-8表現を含むオクテット列をデコードし, JWSヘッダ文字列を得る.
	  
</p>
<a name="ES512Validating"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4.3"></a><h3>A.4.3.&nbsp;
Validating</h3>

<p>
	    ヘッダの<tt>alg</tt>パラメータが "ES512" であることから, JWS署名に格納されている ECDSA P-521 SHA-512 デジタル署名を検証する. いずれかの検証ステップに失敗した場合は, JWSは拒否されなければならない (MUST).
	  
</p>
<p>
            最初に, JWSヘッダ文字列が正しいJSONであるか検証する.
	  
</p>
<p>
            JWS署名の検証は直前の例と同様である. まず, 直前の例と同じく, エンコード済JWS署名をbase64urlデコードする. 次に132オクテットある列を2つの長さ66オクテットの列に分割する必要がある. 最初がRであり次がSである. そして, (x, y), (R, S)およびJWS署名入力のASCII表現オクテットを, ECDSA署名検証器に入力として与える. この検証器はP-521曲線およびSHA-512ハッシュ関数として設定されたものである.
	  
</p>
<p>
            JSON Web Algorithms (JWA)<a class='info' href='#JWA'>[JWA]<span> (</span><span class='info'>Jones, M., &ldquo;JSON Web Algorithms (JWA),&rdquo; July&nbsp;2013.</span><span>)</span></a>仕様の3.4節で説明されているとおり, ECDSAにおいてK値を用いるということは, HMACの正当性検証と同じ方法ではデジタル署名の正しさを検証できないことを意味する. 実装はECDSA検証器を使ってデジタル署名を検証しなければならない(MUST).
	  
</p>
<a name="ExamplePlaintextJWS"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.5"></a><h3>A.5.&nbsp;
Example Plaintext JWS</h3>

<p>
	  The following example JWS Header declares that the
	  encoded object is a Plaintext JWS:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"none"}
</pre></div>
<p>
	  Base64url encoding the octets of the UTF-8 representation of
	  the JWS Header yields this Encoded JWS Header:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJub25lIn0
</pre></div>
<p>
	  The JWS Payload used in this example, which
	  follows, is the same as in the previous examples.  Since
	  the Encoded JWS Payload will therefore be the same, its
	  computation is not repeated here.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"iss":"joe",
   "exp":1300819380,
   "http://example.com/is_root":true}
</pre></div>
<p>
	  The Encoded JWS Signature is the empty string.
	
</p>
<p>
	  Concatenating these parts in the order
	  Header.Payload.Signature with period ('.') characters between the
	  parts yields this complete JWS (with line breaks for
	  display purposes only):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJub25lIn0
  .
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
  .
</pre></div>
<a name="JSONSerializationExample"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6"></a><h3>A.6.&nbsp;
Example JWS Using JWS JSON Serialization</h3>

<p>
	  This section contains an example using the JWS JSON Serialization.
	  This example demonstrates the capability for
	  conveying multiple digital signatures and/or MACs for the
	  same payload.
	
</p>
<p>
	  The Encoded JWS Payload used in this example is the same as
	  that used in the examples in <a class='info' href='#RS256Example'>Appendix&nbsp;A.2<span> (</span><span class='info'>Example JWS using RSASSA-PKCS-v1_5 SHA-256</span><span>)</span></a>
	  and <a class='info' href='#ES256Example'>Appendix&nbsp;A.3<span> (</span><span class='info'>Example JWS using ECDSA P-256 SHA-256</span><span>)</span></a>
	  (with line breaks for display purposes only):
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
  cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
</pre></div>
<p>
	  Two digital signatures are used in this example:
	  the first using RSASSA-PKCS-v1_5 SHA-256 and
	  the second using ECDSA P-256 SHA-256.
	  For the first, the JWS Protected Header and key
	  are the same as in <a class='info' href='#RS256Example'>Appendix&nbsp;A.2<span> (</span><span class='info'>Example JWS using RSASSA-PKCS-v1_5 SHA-256</span><span>)</span></a>,
	  resulting in the same JWS Signature value;
	  therefore, its computation is not repeated here.
	  For the second, the JWS Protected Header and key
	  are the same as in <a class='info' href='#ES256Example'>Appendix&nbsp;A.3<span> (</span><span class='info'>Example JWS using ECDSA P-256 SHA-256</span><span>)</span></a>,
	  resulting in the same JWS Signature value;
	  therefore, its computation is not repeated here.
	
</p>
<a name="JSProtectedHeader"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6.1"></a><h3>A.6.1.&nbsp;
JWS Per-Signature Protected Headers</h3>

<p>
	    The JWS Protected Header value used for the first signature is:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"RS256"}
</pre></div>
<p>
	    Base64url encoding these octets yields this
	    Encoded JWS Header value:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJSUzI1NiJ9
</pre></div>
<p>
	    The JWS Protected Header value used for the second signature is:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"ES256"}
</pre></div>
<p>
	    Base64url encoding these octets yields this
	    Encoded JWS Header value:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJFUzI1NiJ9
</pre></div>
<a name="JSRecipientHeaders"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6.2"></a><h3>A.6.2.&nbsp;
JWS Per-Signature Unprotected Headers</h3>

<p>
	    Key ID values are supplied for both keys using per-signature
	    header parameters.
	    The two values used to represent these Key IDs are:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"kid":"2010-12-29"}
</pre></div>
<p>
	    and:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"kid":"e9bc097a-ce51-4036-9562-d2ade882db0d"}
</pre></div>
<a name="JSHeader"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6.3"></a><h3>A.6.3.&nbsp;
Complete JWS Header Values</h3>

<p>
	    Combining the protected and unprotected header values
	    supplied, the JWS Header values used for the first and second
	    signatures respectively are:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"RS256",
   "kid":"2010-12-29"}
</pre></div>
<p>
	    and:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"ES256",
   "kid":"e9bc097a-ce51-4036-9562-d2ade882db0d"}
</pre></div>
<a name="JSComplete"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6.4"></a><h3>A.6.4.&nbsp;
Complete JWS JSON Serialization Representation</h3>

<p>
	    The complete JSON Web Signature JSON Serialization
	    for these values is as follows
	    (with line breaks for display purposes only):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"payload":
    "eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGF
     tcGxlLmNvbS9pc19yb290Ijp0cnVlfQ",
   "signatures":[
    {"protected":"eyJhbGciOiJSUzI1NiJ9",
     "header":
      {"kid":"2010-12-29"},
     "signature":
      "cC4hiUPoj9Eetdgtv3hF80EGrhuB__dzERat0XF9g2VtQgr9PJbu3XOiZj5RZ
       mh7AAuHIm4Bh-0Qc_lF5YKt_O8W2Fp5jujGbds9uJdbF9CUAr7t1dnZcAcQjb
       KBYNX4BAynRFdiuB--f_nZLgrnbyTyWzO75vRK5h6xBArLIARNPvkSjtQBMHl
       b1L07Qe7K0GarZRmB_eSN9383LcOLn6_dO--xi12jzDwusC-eOkHWEsqtFZES
       c6BfI7noOPqvhJ1phCnvWh6IeYI2w9QOYEUipUTI8np6LbgGY9Fs98rqVt5AX
       LIhWkWywlVmtVrBp0igcN_IoypGlUPQGe77Rw"},
    {"protected":"eyJhbGciOiJFUzI1NiJ9",
     "header":
      {"kid":"e9bc097a-ce51-4036-9562-d2ade882db0d"},
     "signature":
      "DtEhU3ljbEg8L38VWAfUAqOyKAM6-Xx-F4GawxaepmXFCgfTjDxw5djxLa8IS
       lSApmWQxfKTUJqPP3-Kg6NU1Q"}]
  }
</pre></div>
<a name="x5cExample"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
"x5c" (X.509 Certificate Chain) Example</h3>

<p>
	The JSON array below is an example of a certificate chain
	that could be used as the value of an
	<tt>x5c</tt> (X.509 Certificate Chain) header parameter,
	per <a class='info' href='#x5cDef'>Section&nbsp;4.1.6<span> (</span><span class='info'>&quot;x5c&quot; (X.509 Certificate Chain) Header Parameter</span><span>)</span></a>.
	Note that since these strings contain base64 encoded (not base64url encoded)
	values, they are allowed to contain white space and line breaks.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  ["MIIE3jCCA8agAwIBAgICAwEwDQYJKoZIhvcNAQEFBQAwYzELMAkGA1UEBhMCVVM
    xITAfBgNVBAoTGFRoZSBHbyBEYWRkeSBHcm91cCwgSW5jLjExMC8GA1UECxMoR2
    8gRGFkZHkgQ2xhc3MgMiBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw0wNjExM
    TYwMTU0MzdaFw0yNjExMTYwMTU0MzdaMIHKMQswCQYDVQQGEwJVUzEQMA4GA1UE
    CBMHQXJpem9uYTETMBEGA1UEBxMKU2NvdHRzZGFsZTEaMBgGA1UEChMRR29EYWR
    keS5jb20sIEluYy4xMzAxBgNVBAsTKmh0dHA6Ly9jZXJ0aWZpY2F0ZXMuZ29kYW
    RkeS5jb20vcmVwb3NpdG9yeTEwMC4GA1UEAxMnR28gRGFkZHkgU2VjdXJlIENlc
    nRpZmljYXRpb24gQXV0aG9yaXR5MREwDwYDVQQFEwgwNzk2OTI4NzCCASIwDQYJ
    KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMQt1RWMnCZM7DI161+4WQFapmGBWTt
    wY6vj3D3HKrjJM9N55DrtPDAjhI6zMBS2sofDPZVUBJ7fmd0LJR4h3mUpfjWoqV
    Tr9vcyOdQmVZWt7/v+WIbXnvQAjYwqDL1CBM6nPwT27oDyqu9SoWlm2r4arV3aL
    GbqGmu75RpRSgAvSMeYddi5Kcju+GZtCpyz8/x4fKL4o/K1w/O5epHBp+YlLpyo
    7RJlbmr2EkRTcDCVw5wrWCs9CHRK8r5RsL+H0EwnWGu1NcWdrxcx+AuP7q2BNgW
    JCJjPOq8lh8BJ6qf9Z/dFjpfMFDniNoW1fho3/Rb2cRGadDAW/hOUoz+EDU8CAw
    EAAaOCATIwggEuMB0GA1UdDgQWBBT9rGEyk2xF1uLuhV+auud2mWjM5zAfBgNVH
    SMEGDAWgBTSxLDSkdRMEXGzYcs9of7dqGrU4zASBgNVHRMBAf8ECDAGAQH/AgEA
    MDMGCCsGAQUFBwEBBCcwJTAjBggrBgEFBQcwAYYXaHR0cDovL29jc3AuZ29kYWR
    keS5jb20wRgYDVR0fBD8wPTA7oDmgN4Y1aHR0cDovL2NlcnRpZmljYXRlcy5nb2
    RhZGR5LmNvbS9yZXBvc2l0b3J5L2dkcm9vdC5jcmwwSwYDVR0gBEQwQjBABgRVH
    SAAMDgwNgYIKwYBBQUHAgEWKmh0dHA6Ly9jZXJ0aWZpY2F0ZXMuZ29kYWRkeS5j
    b20vcmVwb3NpdG9yeTAOBgNVHQ8BAf8EBAMCAQYwDQYJKoZIhvcNAQEFBQADggE
    BANKGwOy9+aG2Z+5mC6IGOgRQjhVyrEp0lVPLN8tESe8HkGsz2ZbwlFalEzAFPI
    UyIXvJxwqoJKSQ3kbTJSMUA2fCENZvD117esyfxVgqwcSeIaha86ykRvOe5GPLL
    5CkKSkB2XIsKd83ASe8T+5o0yGPwLPk9Qnt0hCqU7S+8MxZC9Y7lhyVJEnfzuz9
    p0iRFEUOOjZv2kWzRaJBydTXRE4+uXR21aITVSzGh6O1mawGhId/dQb8vxRMDsx
    uxN89txJx9OjxUUAiKEngHUuHqDTMBqLdElrRhjZkAzVvb3du6/KFUJheqwNTrZ
    EjYx8WnM25sgVjOuH0aBsXBTWVU+4=",
   "MIIE+zCCBGSgAwIBAgICAQ0wDQYJKoZIhvcNAQEFBQAwgbsxJDAiBgNVBAcTG1Z
    hbGlDZXJ0IFZhbGlkYXRpb24gTmV0d29yazEXMBUGA1UEChMOVmFsaUNlcnQsIE
    luYy4xNTAzBgNVBAsTLFZhbGlDZXJ0IENsYXNzIDIgUG9saWN5IFZhbGlkYXRpb
    24gQXV0aG9yaXR5MSEwHwYDVQQDExhodHRwOi8vd3d3LnZhbGljZXJ0LmNvbS8x
    IDAeBgkqhkiG9w0BCQEWEWluZm9AdmFsaWNlcnQuY29tMB4XDTA0MDYyOTE3MDY
    yMFoXDTI0MDYyOTE3MDYyMFowYzELMAkGA1UEBhMCVVMxITAfBgNVBAoTGFRoZS
    BHbyBEYWRkeSBHcm91cCwgSW5jLjExMC8GA1UECxMoR28gRGFkZHkgQ2xhc3MgM
    iBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTCCASAwDQYJKoZIhvcNAQEBBQADggEN
    ADCCAQgCggEBAN6d1+pXGEmhW+vXX0iG6r7d/+TvZxz0ZWizV3GgXne77ZtJ6XC
    APVYYYwhv2vLM0D9/AlQiVBDYsoHUwHU9S3/Hd8M+eKsaA7Ugay9qK7HFiH7Eux
    6wwdhFJ2+qN1j3hybX2C32qRe3H3I2TqYXP2WYktsqbl2i/ojgC95/5Y0V4evLO
    tXiEqITLdiOr18SPaAIBQi2XKVlOARFmR6jYGB0xUGlcmIbYsUfb18aQr4CUWWo
    riMYavx4A6lNf4DD+qta/KFApMoZFv6yyO9ecw3ud72a9nmYvLEHZ6IVDd2gWMZ
    Eewo+YihfukEHU1jPEX44dMX4/7VpkI+EdOqXG68CAQOjggHhMIIB3TAdBgNVHQ
    4EFgQU0sSw0pHUTBFxs2HLPaH+3ahq1OMwgdIGA1UdIwSByjCBx6GBwaSBvjCBu
    zEkMCIGA1UEBxMbVmFsaUNlcnQgVmFsaWRhdGlvbiBOZXR3b3JrMRcwFQYDVQQK
    Ew5WYWxpQ2VydCwgSW5jLjE1MDMGA1UECxMsVmFsaUNlcnQgQ2xhc3MgMiBQb2x
    pY3kgVmFsaWRhdGlvbiBBdXRob3JpdHkxITAfBgNVBAMTGGh0dHA6Ly93d3cudm
    FsaWNlcnQuY29tLzEgMB4GCSqGSIb3DQEJARYRaW5mb0B2YWxpY2VydC5jb22CA
    QEwDwYDVR0TAQH/BAUwAwEB/zAzBggrBgEFBQcBAQQnMCUwIwYIKwYBBQUHMAGG
    F2h0dHA6Ly9vY3NwLmdvZGFkZHkuY29tMEQGA1UdHwQ9MDswOaA3oDWGM2h0dHA
    6Ly9jZXJ0aWZpY2F0ZXMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS9yb290LmNybD
    BLBgNVHSAERDBCMEAGBFUdIAAwODA2BggrBgEFBQcCARYqaHR0cDovL2NlcnRpZ
    mljYXRlcy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5MA4GA1UdDwEB/wQEAwIBBjAN
    BgkqhkiG9w0BAQUFAAOBgQC1QPmnHfbq/qQaQlpE9xXUhUaJwL6e4+PrxeNYiY+
    Sn1eocSxI0YGyeR+sBjUZsE4OWBsUs5iB0QQeyAfJg594RAoYC5jcdnplDQ1tgM
    QLARzLrUc+cb53S8wGd9D0VmsfSxOaFIqII6hR8INMqzW/Rn453HWkrugp++85j
    09VZw==",
   "MIIC5zCCAlACAQEwDQYJKoZIhvcNAQEFBQAwgbsxJDAiBgNVBAcTG1ZhbGlDZXJ
    0IFZhbGlkYXRpb24gTmV0d29yazEXMBUGA1UEChMOVmFsaUNlcnQsIEluYy4xNT
    AzBgNVBAsTLFZhbGlDZXJ0IENsYXNzIDIgUG9saWN5IFZhbGlkYXRpb24gQXV0a
    G9yaXR5MSEwHwYDVQQDExhodHRwOi8vd3d3LnZhbGljZXJ0LmNvbS8xIDAeBgkq
    hkiG9w0BCQEWEWluZm9AdmFsaWNlcnQuY29tMB4XDTk5MDYyNjAwMTk1NFoXDTE
    5MDYyNjAwMTk1NFowgbsxJDAiBgNVBAcTG1ZhbGlDZXJ0IFZhbGlkYXRpb24gTm
    V0d29yazEXMBUGA1UEChMOVmFsaUNlcnQsIEluYy4xNTAzBgNVBAsTLFZhbGlDZ
    XJ0IENsYXNzIDIgUG9saWN5IFZhbGlkYXRpb24gQXV0aG9yaXR5MSEwHwYDVQQD
    ExhodHRwOi8vd3d3LnZhbGljZXJ0LmNvbS8xIDAeBgkqhkiG9w0BCQEWEWluZm9
    AdmFsaWNlcnQuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDOOnHK5a
    vIWZJV16vYdA757tn2VUdZZUcOBVXc65g2PFxTXdMwzzjsvUGJ7SVCCSRrCl6zf
    N1SLUzm1NZ9WlmpZdRJEy0kTRxQb7XBhVQ7/nHk01xC+YDgkRoKWzk2Z/M/VXwb
    P7RfZHM047QSv4dk+NoS/zcnwbNDu+97bi5p9wIDAQABMA0GCSqGSIb3DQEBBQU
    AA4GBADt/UG9vUJSZSWI4OB9L+KXIPqeCgfYrx+jFzug6EILLGACOTb2oWH+heQ
    C1u+mNr0HZDzTuIYEZoDJJKPTEjlbVUjP9UNV+mWwD5MlM/Mtsq2azSiGM5bUMM
    j4QssxsodyamEwCW/POuZ6lcg5Ktz885hZo+L7tdEy8W9ViH0Pd"]
</pre></div>
<a name="base64urlnotes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Notes on implementing base64url encoding without padding</h3>

<p>
	This appendix describes how to implement base64url encoding
	and decoding functions without padding based upon standard
	base64 encoding and decoding functions that do use padding.
      
</p>
<p>
	To be concrete, example C# code implementing these functions
	is shown below.  Similar code could be used in other
	languages.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  static string base64urlencode(byte [] arg)
  {
    string s = Convert.ToBase64String(arg); // Regular base64 encoder
    s = s.Split('=')[0]; // Remove any trailing '='s
    s = s.Replace('+', '-'); // 62nd char of encoding
    s = s.Replace('/', '_'); // 63rd char of encoding
    return s;
  }

  static byte [] base64urldecode(string arg)
  {
    string s = arg;
    s = s.Replace('-', '+'); // 62nd char of encoding
    s = s.Replace('_', '/'); // 63rd char of encoding
    switch (s.Length % 4) // Pad with trailing '='s
    {
      case 0: break; // No pad chars in this case
      case 2: s += "=="; break; // Two pad chars
      case 3: s += "="; break; // One pad char
      default: throw new System.Exception(
        "Illegal base64url string!");
    }
    return Convert.FromBase64String(s); // Standard base64 decoder
  }
</pre></div>
<p>
	As per the example code above, the number of '=' padding
	characters that needs to be added to the end of a base64url
	encoded string without padding to turn it into one with
	padding is a deterministic function of the length of the
	encoded string.  Specifically,

	if the length mod 4 is 0, no padding is added;
	if the length mod 4 is 2, two '=' padding characters are added;
	if the length mod 4 is 3, one '=' padding character is added;
	if the length mod 4 is 1, the input is malformed.
      
</p>
<p>
	An example correspondence between unencoded and encoded values
	follows.  The octet sequence below encodes into the string
	below, which when decoded, reproduces the octet sequence.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>3 236 255 224 193</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>A-z_4ME</pre></div>
<a name="critTest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Negative Test Case for "crit" Header Parameter</h3>

<p>
	Conforming implementations must reject input containing critical extensions
	that are not understood or cannot be processed.  The following JWS must
	be rejected by all implementations, because it uses an extension
	header parameter name <tt>http://example.invalid/UNDEFINED</tt>
	that they do not understand.
	Any other similar input, in which the use of the value
	<tt>http://example.invalid/UNDEFINED</tt> is substituted for
	any other header parameter name not understood by the implementation,
	must also be rejected.

	
<p>
	    The JWS Header value for this JWS is:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {"alg":"none",
   "crit":["http://example.invalid/UNDEFINED"],
   "http://example.invalid/UNDEFINED":true
  }
</pre></div>

	
<p>
	    The complete JWS that must be rejected is as follows
	    (with line breaks for display purposes only):
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJub25lIiwNCiAiY3JpdCI6WyJodHRwOi8vZXhhbXBsZS5jb20vVU5ERU
  ZJTkVEIl0sDQogImh0dHA6Ly9leGFtcGxlLmNvbS9VTkRFRklORUQiOnRydWUNCn0.
  RkFJTA.
</pre></div>
      

<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E"></a><h3>Appendix E.&nbsp;
Acknowledgements</h3>

<p>
	Solutions for signing JSON content were previously explored by
	<a class='info' href='#MagicSignatures'>Magic Signatures<span> (</span><span class='info'>Panzer (editor), J., Laurie, B., and D. Balfanz, &ldquo;Magic Signatures,&rdquo; January&nbsp;2011.</span><span>)</span></a> [MagicSignatures], <a class='info' href='#JSS'>JSON Simple Sign<span> (</span><span class='info'>Bradley, J. and N. Sakimura (editor), &ldquo;JSON Simple Sign,&rdquo; September&nbsp;2010.</span><span>)</span></a> [JSS], and <a class='info' href='#CanvasApp'>Canvas Applications<span> (</span><span class='info'>Facebook, &ldquo;Canvas Applications,&rdquo; 2010.</span><span>)</span></a> [CanvasApp], all of which
	influenced this draft.
      
</p>
<p>
	Thanks to Axel Nennker for his early implementation
	and feedback on the JWS and JWE specifications.
      
</p>
<p>
        This specification is the work of the JOSE Working Group,
	which includes dozens of active and dedicated participants.
	In particular, the following individuals contributed ideas,
        feedback, and wording that influenced this specification:
      
</p>
<p>
	Dirk Balfanz,
	Richard Barnes,
	Brian Campbell,
	Breno de Medeiros,
	Dick Hardt,
	Joe Hildebrand,
	Jeff Hodges,
	Edmund Jay,
	Yaron Y. Goland,
	Ben Laurie,
	James Manger,
	Matt Miller,
	Tony Nadalin,
	Axel Nennker,
	John Panzer,
	Emmanuel Raviart,
	Eric Rescorla,
	Jim Schaad,
	Paul Tarjan,
	Hannes Tschofenig,
	and Sean Turner.
      
</p>
<p>
	Jim Schaad and Karen O'Donoghue chaired the JOSE working group and
	Sean Turner and Stephen Farrell served as Security area directors
	during the creation of this specification.
      
</p>
<a name="History"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.F"></a><h3>Appendix F.&nbsp;
Document History</h3>

<p>
	[[ to be removed by the RFC editor before publication as an RFC ]]
      
</p>
<p>
	-14
	</p>
<ul class="text">
<li>
	    Stated that the <tt>signature</tt> parameter
	    is to be omitted in the JWS JSON Serialization
	    when its value would be empty
	    (which is only the case for a Plaintext JWS).
	  
</li>
</ul><p>
      
</p>
<p>
	-13
	</p>
<ul class="text">
<li>
	    Made all header parameter values be per-signature/MAC,
	    addressing issue #24.
	  
</li>
</ul><p>
      
</p>
<p>
	-12
	</p>
<ul class="text">
<li>
	    Clarified that the <tt>typ</tt> and
	    <tt>cty</tt> header parameters are used
	    in an application-specific manner
	    and have no effect upon the JWS processing.
	  
</li>
<li>
	    Replaced the MIME types
	    <tt>application/jws+json</tt> and
	    <tt>application/jws</tt> with
	    <tt>application/jose+json</tt> and
	    <tt>application/jose</tt>.
	  
</li>
<li>
	    Stated that recipients MUST either reject JWSs with
	    duplicate Header Parameter Names
	    or use a JSON parser that returns only
	    the lexically last duplicate member name.
	  
</li>
<li>
	    Added a Serializations section with parallel treatment of the
	    JWS Compact Serialization
	    and the
	    JWS JSON Serialization
	    and also moved the former Implementation Considerations content there.
	  
</li>
</ul><p>
      
</p>
<p>
	-11
	</p>
<ul class="text">
<li>
	    Added Key Identification section.
	  
</li>
<li>
	    For the JWS JSON Serialization, enable header parameter values
	    to be specified in any of three parameters:
	    the <tt>protected</tt> member that is
	    integrity protected and shared among all recipients,
	    the <tt>unprotected</tt> member that is
	    not integrity protected and shared among all recipients,
	    and the <tt>header</tt> member that is
	    not integrity protected and specific to a particular recipient.
	    (This does not affect the JWS Compact Serialization, in which all
	    header parameter values are in a single integrity protected JWE Header value.)
	  
</li>
<li>
	    Removed suggested compact serialization for multiple
	    digital signatures and/or MACs.
	  
</li>
<li>
	    Changed the MIME type name <tt>application/jws-js</tt>
	    to <tt>application/jws+json</tt>,
	    addressing issue #22.
	  
</li>
<li>
	    Tightened the description of the
	    <tt>crit</tt> (critical) header parameter.
	  
</li>
<li>
	    Added a negative test case for the
	    <tt>crit</tt> header parameter
	  
</li>
</ul><p>
      
</p>
<p>
	-10
	</p>
<ul class="text">
<li>
	    Added an appendix suggesting a possible compact serialization
	    for JWSs with multiple digital signatures and/or MACs.
	  
</li>
</ul><p>
      
</p>
<p>
	-09
	</p>
<ul class="text">
<li>
	    Added JWS JSON Serialization, as specified by
	    draft-jones-jose-jws-json-serialization-04.
	  
</li>
<li>
	    Registered <tt>application/jws-js</tt> MIME type
	    and <tt>JWS-JS</tt> typ header parameter value.
	  
</li>
<li>
	    Defined that the default action for header parameters that
	    are not understood is to ignore them unless specifically
	    designated as "MUST be understood" or included in the new
	    <tt>crit</tt> (critical) header parameter list.
	    This addressed issue #6.
	  
</li>
<li>
	    Changed term "JWS Secured Input" to "JWS Signing Input".
	  
</li>
<li>
	    Changed from using the term "byte" to "octet" when referring to 8 bit values.
	  
</li>
<li>
	    Changed member name from <tt>recipients</tt> to
	    <tt>signatures</tt> in the JWS JSON Serialization.
	  
</li>
<li>
	    Added complete values using the JWS Compact Serialization
	    for all examples.
	  
</li>
</ul><p>
      
</p>
<p>
	-08
	</p>
<ul class="text">
<li>
	    Applied editorial improvements suggested by
	    Jeff Hodges and Hannes Tschofenig.
	    Many of these simplified the terminology used.
	  
</li>
<li>
	    Clarified statements of the form "This header parameter is OPTIONAL"
	    to "Use of this header parameter is OPTIONAL".
	  
</li>
<li>
	    Added a Header Parameter Usage Location(s) field to the
	    IANA JSON Web Signature and Encryption Header Parameters registry.
	  
</li>
<li>
	    Added seriesInfo information to Internet Draft references.
	  
</li>
</ul><p>
      
</p>
<p>
	-07
	</p>
<ul class="text">
<li>
	    Updated references.
	  
</li>
</ul><p>
      
</p>
<p>
	-06
	</p>
<ul class="text">
<li>
	    Changed <tt>x5c</tt> (X.509 Certificate Chain)
	    representation from being a single string to being an array of strings,
	    each containing a single base64 encoded DER certificate value,
	    representing elements of the certificate chain.
	  
</li>
<li>
	    Applied changes made by the RFC Editor to RFC 6749's registry language
	    to this specification.
	  
</li>
</ul><p>
      
</p>
<p>
	-05
	</p>
<ul class="text">
<li>
	    Added statement that
	    "StringOrURI values are compared as case-sensitive strings
	    with no transformations or canonicalizations applied".
	  
</li>
<li>
	    Indented artwork elements to better distinguish them from the body text.
	  
</li>
</ul><p>
      
</p>
<p>
	-04
	</p>
<ul class="text">
<li>
	    Completed JSON Security Considerations section, including
	    considerations about rejecting input with duplicate member names.
	  
</li>
<li>
	    Completed security considerations on the use of a SHA-1 hash when computing
	    <tt>x5t</tt> (x.509 certificate thumbprint) values.
	  
</li>
<li>
	    Refer to the registries as the primary sources of defined
	    values and then secondarily reference the sections
	    defining the initial contents of the registries.
	  
</li>
<li>
	    Normatively reference
	    <a class='info' href='#W3C.CR-xmldsig-core2-20120124'>XML DSIG 2.0<span> (</span><span class='info'>Eastlake, D., Reagle, J., Yiu, K., Solo, D., Datta, P., Hirsch, F., Cantor, S., and T. Roessler, &ldquo;XML Signature Syntax and Processing Version 2.0,&rdquo; January&nbsp;2012.</span><span>)</span></a> [W3C.CR&#8209;xmldsig&#8209;core2&#8209;20120124]
	    for its security considerations.
	  
</li>
<li>
	    Added this language to Registration Templates:
	    "This name is case sensitive.  Names that match other registered names
	    in a case insensitive manner SHOULD NOT be accepted."
	  
</li>
<li>
	    Reference draft-jones-jose-jws-json-serialization
	    instead of draft-jones-json-web-signature-json-serialization.
	  
</li>
<li>
	    Described additional open issues.
	  
</li>
<li>
	    Applied editorial suggestions.
	  
</li>
</ul><p>
      
</p>
<p>
        -03
        </p>
<ul class="text">
<li>
	    Added the <tt>cty</tt> (content type) header parameter
	    for declaring type information about the secured content,
	    as opposed to the <tt>typ</tt> (type) header parameter,
	    which declares type information about this object.
	  
</li>
<li>
	    Added "Collision Resistant Namespace" to the terminology section.
	  
</li>
<li>
	    Reference ITU.X690.1994 for DER encoding.
	  
</li>
<li>
	    Added an example JWS using ECDSA P-521 SHA-512.  This has particular
	    illustrative value because of the use of the 521 bit integers
	    in the key and signature values.
	    This is also an example in which the payload is not a base64url
	    encoded JSON object.
	  
</li>
<li>
	    Added an example <tt>x5c</tt> value.
	  
</li>
<li>
	    No longer say "the UTF-8 representation of the JWS Secured Input
	    (which is the same as the ASCII representation)".  Just call it
	    "the ASCII representation of the JWS Secured Input".
	  
</li>
<li>
	    Added Registration Template sections for defined registries.
	  
</li>
<li>
	    Added Registry Contents sections to populate registry values.
	  
</li>
<li>
	    Changed name of the JSON Web Signature and Encryption "typ" Values registry
	    to be the JSON Web Signature and Encryption Type Values registry, since
	    it is used for more than just values of the
	    <tt>typ</tt> parameter.
	  
</li>
<li>
	    Moved registries
	    JSON Web Signature and Encryption Header Parameters and
	    JSON Web Signature and Encryption Type Values
	    to the JWS specification.
	  
</li>
<li>
	    Numerous editorial improvements.
	  
</li>
</ul><p>
      
</p>
<p>
        -02
        </p>
<ul class="text">
<li>
	    Clarified that it is an error when a <tt>kid</tt>
	    value is included and no matching key is found.
	  
</li>
<li>
	    Removed assumption that <tt>kid</tt> (key ID)
	    can only refer to an asymmetric key.
	  
</li>
<li>
	    Clarified that JWSs with duplicate Header Parameter Names
	    MUST be rejected.
	  
</li>
<li>
	    Clarified the relationship between
	    <tt>typ</tt> header parameter values
	    and MIME types.
	  
</li>
<li>
	    Registered application/jws MIME type and "JWS" typ header parameter value.
	  
</li>
<li>
	    Simplified JWK terminology to get replace the "JWK Key Object" and
	    "JWK Container Object" terms with simply "JSON Web Key (JWK)"
	    and "JSON Web Key Set (JWK Set)" and to eliminate potential
	    confusion between single keys and sets of keys.
	    As part of this change, the Header Parameter Name for a
	    public key value was changed from
	    <tt>jpk</tt> (JSON Public Key) to
	    <tt>jwk</tt> (JSON Web Key).
	  
</li>
<li>
	    Added suggestion on defining additional header parameters
	    such as <tt>x5t#S256</tt> in the future
	    for certificate thumbprints using hash algorithms other
	    than SHA-1.
	  
</li>
<li>
	    Specify RFC 2818 server identity validation, rather than
	    RFC 6125 (paralleling the same decision in the OAuth specs).
	  
</li>
<li>
	    Generalized language to refer to Message Authentication Codes (MACs)
	    rather than Hash-based Message Authentication Codes (HMACs)
	    unless in a context specific to HMAC algorithms.
	  
</li>
<li>
            Reformatted to give each header parameter its own section heading.
          
</li>
</ul><p>
      
</p>
<p>
        -01
        </p>
<ul class="text">
<li>
	    Moved definition of Plaintext JWSs (using "alg":"none")
	    here from the JWT specification since this functionality is
	    likely to be useful in more contexts that just for JWTs.
          
</li>
<li>
	    Added <tt>jpk</tt> and <tt>x5c</tt> header parameters for including
	    JWK public keys and X.509 certificate chains directly in
	    the header.
	  
</li>
<li>
	    Clarified that this specification is defining the JWS
	    Compact Serialization.  Referenced the new JWS-JS spec,
	    which defines the JWS JSON Serialization.
	  
</li>
<li>
	    Added text "New header parameters should be introduced
	    sparingly since an implementation that does not understand
	    a parameter MUST reject the JWS".
	  
</li>
<li>
	    Clarified that the order of the creation and validation
	    steps is not significant in cases where there are no
	    dependencies between the inputs and outputs of the steps.
	  
</li>
<li>
	    Changed "no canonicalization is performed" to "no
	    canonicalization need be performed".
	  
</li>
<li>
	    Corrected the Magic Signatures reference.
          
</li>
<li>
	    Made other editorial improvements suggested by JOSE
	    working group participants.
	  
</li>
</ul><p>
      
</p>
<p>
        -00
        </p>
<ul class="text">
<li>
            Created the initial IETF draft based upon
            draft-jones-json-web-signature-04 with no normative
            changes.
          
</li>
<li>
	    Changed terminology to no longer call both digital
	    signatures and HMACs "signatures".
	  
</li>
</ul><p>
      
</p>
<a name="Translator"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.G"></a><h3>Appendix G.&nbsp;
翻訳者</h3>

<p>
        本仕様の翻訳は, <a class='info' href='#oidfj'>OpenIDファウンデーションジャパン<span> (</span><span class='info'>OpenIDファウンデーションジャパン, &ldquo;OpenIDファウンデーションジャパン,&rdquo; .</span><span>)</span></a> [oidfj] <a class='info' href='#oidfj-trans'>翻訳・教育ワーキンググループ<span> (</span><span class='info'>OpenIDファウンデーションジャパン, &ldquo;翻訳・教育ワーキンググループ,&rdquo; .</span><span>)</span></a> [oidfj&#8209;trans]を主体として, 有志のメンバーによって行われました.
        質問や修正依頼などについては, <a class='info' href='#oidfj-github'>Githubレポジトリー<span> (</span><span class='info'>OpenIDファウンデーションジャパン, &ldquo;Githubレポジトリー,&rdquo; .</span><span>)</span></a> [oidfj&#8209;github] にご連絡ください.
      
</p>
<p>
        </p>
<ul class="text">
<li>
            Kaoru Maeda
          
</li>
<li>
            Ryo Ito (mixi, Inc.)
          
</li>
<li>
            Yutaka Obuchi (Hitachi Solutions)
          
</li>
<li>
            Yuya Ito
          
</li>
</ul><p>
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael B. Jones</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">mbj@microsoft.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://self-issued.info/">http://self-issued.info/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">John Bradley</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ping Identity</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ve7jtb@ve7jtb.com">ve7jtb@ve7jtb.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nat Sakimura</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nomura Research Institute</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:n-sakimura@nri.co.jp">n-sakimura@nri.co.jp</a></td></tr>
</table>
</body></html>
